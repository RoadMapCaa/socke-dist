"use strict";(self.webpackChunksocket_pwa=self.webpackChunksocket_pwa||[]).push([[520],{7520:(nt,T,l)=>{l.r(T),l.d(T,{SortingModule:()=>it});var m=l(9808),d=l(9539),A=l(5898),v=l(2340),t=l(5e3),x=l(327);let C=(()=>{class i extends A.sk{constructor(){super({url:v.N.wsUrl,options:{}}),this.ioSocket.auth={"x-token":localStorage.getItem("access_token")}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-sorting"]],features:[t.qOj],decls:3,vars:0,consts:[[1,"container-fluid","mt-4"]],template:function(e,o){1&e&&(t._UZ(0,"app-navbar"),t.TgZ(1,"div",0),t._UZ(2,"router-outlet"),t.qZA())},directives:[x.S,d.lC],encapsulation:2}),i})();var s=l(2382),U=l(520);const{endpoint:p}=v.N,h=`${p}/sorting`,S=`${p}/sorting/type-review`,B=`${p}/sorting/type-container`,w=`${p}/sorting/sub-category`,O=`${p}/sorting/sub-category`;let y=(()=>{class i{constructor(e){this.http=e}list(){return this.http.get(h)}get(e){return this.http.get(`${h}/detail/${e}`)}getBySorter(e){return this.http.get(`${h}/by-sorter/${e}`)}insert(e){return this.http.post(h,e)}update(e,o){return this.http.put(`${h}/${e}`,o)}listTypeReviews(){return this.http.get(S)}listTypeContainers(){return this.http.get(B)}listCategories(){return this.http.get(w)}listMbfu(e){return this.http.get(`${O}/${e}`)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(U.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var b=l(5190),_=l(7556),q=l(7028),f=l(9444);function N(i,r){if(1&i&&(t.TgZ(0,"option",22),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(null==e?null:e.name)}}function I(i,r){if(1&i&&(t.TgZ(0,"option",22),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(null==e?null:e.name)}}const J=function(){return["fas","hourglass-start"]};function M(i,r){if(1&i&&(t.TgZ(0,"button",23),t._UZ(1,"fa-icon",24),t._uU(2," Iniciar "),t.qZA()),2&i){const e=t.oxw();t.Q6J("disabled",!e.form.valid),t.xp6(1),t.Q6J("icon",t.DdM(2,J))}}const k=function(){return["fas","spinner"]};function F(i,r){1&i&&(t.TgZ(0,"button",25),t._UZ(1,"fa-icon",26),t._uU(2," Espere... "),t.qZA()),2&i&&(t.xp6(1),t.Q6J("icon",t.DdM(2,k))("spin",!0))}function Q(i,r){if(1&i&&(t.TgZ(0,"tr",17),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"date"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td",19),t._uU(17),t.qZA(),t.qZA()),2&i){const e=r.$implicit,o=r.index,n=t.oxw();t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Oqu(t.xi3(5,8,e.endTime,"MM/dd/yy")),t.xp6(3),t.Oqu(t.xi3(8,11,e.startTime,"HH:mm")),t.xp6(3),t.Oqu(t.xi3(11,14,e.endTime,"HH:mm")),t.xp6(3),t.Oqu(e.classifiedBoxes),t.xp6(2),t.Oqu(n.gm.convertMsToHMByItem(e)),t.xp6(1),t.Q6J("ngStyle",n.getColor(e)),t.xp6(1),t.Oqu(n.calculateProductivity(e))}}let Y=(()=>{class i{constructor(e,o,n,u,a,c,g){this.fb=e,this.sortingService=o,this.campusService=n,this.authService=u,this.router=a,this.location=c,this.gm=g,this.loading=!1,this.user=this.authService.user,this.typeReviews=[],this.typeContainers=[],this.sortingsBySorter=[],this.time=0,this.now=new Date,this.meta=0,this.metaGreen=0,this.totalBoxes=0,this.totalTime=0,this.totalGap=0,this.totalProductivity=0,this.form=this.fb.group({deliveryUnit:["",[s.kI.required]],startTime:[""],sorter:[this.user.uid,[s.kI.required]],reviewType:["",[s.kI.required]],containerType:["",[s.kI.required]],classifiedBoxes:["",[s.kI.required,s.kI.min(1)]]}),history.pushState(null,"",window.location.href),this.location.onPopState(()=>{history.pushState(null,"",window.location.href)})}ngOnInit(){this.getCampus(),this.listTypeReviews(),this.listTypeContainers(),this.listBySorter()}getCampus(){var e;const{campus:o}=this.authService.user;this.campusService.getCampusByCode(o).subscribe(n=>{n&&(this.meta=n.goalSorting,this.metaGreen=Math.round(.9*this.meta))}),null===(e=this.form.get("deliveryUnit"))||void 0===e||e.patchValue(o)}listTypeReviews(){this.loading=!0,this.sortingService.listTypeReviews().subscribe(e=>{var o;this.typeReviews=e,null===(o=this.form.get("reviewType"))||void 0===o||o.patchValue(e[0]._id),this.loading=!1})}listTypeContainers(){this.loading=!0,this.sortingService.listTypeContainers().subscribe(e=>{var o;this.typeContainers=e,null===(o=this.form.get("containerType"))||void 0===o||o.patchValue(e[0]._id),this.loading=!1})}sendData(){this.form.invalid||(this.form.patchValue({startTime:new Date}),this.sortingService.insert(this.form.value).subscribe(e=>{this.router.navigate(["/sorting/form",e._id])}))}listBySorter(){this.totalBoxes=0,this.totalTime=0,this.totalProductivity=0,this.totalGap=0,this.loading=!0,this.sortingService.getBySorter(this.user.uid).subscribe(e=>{this.sortingsBySorter=e,this.sortingsBySorter.forEach(o=>{this.totalBoxes+=parseInt(o.classifiedBoxes),this.totalTime+=this.calculateTime(o);const n=new Date(o.startTime).getTime(),a=new Date(o.endTime).getTime()-n;this.totalGap+=a}),this.sortingsBySorter.length>0&&(this.totalProductivity=Math.round(this.totalBoxes/this.totalTime)),this.loading=!1})}calculateTime(e){const o=new Date(e.startTime).getTime(),n=new Date(e.endTime).getTime();return e.gap=n-o,Math.round(100*(e.gap/36e5+Number.EPSILON))/100}calculateProductivity(e){const o=parseInt(e.classifiedBoxes),n=this.calculateTime(e);return Math.round(o/n)}colorize(e){return e>0&&e<this.metaGreen?{"background-color":"#ff0000",color:"#fff"}:e>=this.metaGreen&&e<this.meta?{"background-color":"#ffd700",color:"#000"}:e>=this.meta?{"background-color":"#00b050",color:"#fff"}:{"background-color":"#fff",color:"#000"}}getColor(e){const o=new Date(e.startTime).getTime(),u=new Date(e.endTime).getTime()-o,a=parseInt(e.classifiedBoxes),c=Math.round(100*(u/36e5+Number.EPSILON))/100,g=Math.round(a/c);return this.colorize(g)}getColorTotal(){const e=Math.round(100*(this.totalGap/36e5+Number.EPSILON))/100,o=Math.round(this.totalBoxes/e);return this.colorize(o)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(s.qu),t.Y36(y),t.Y36(b.j),t.Y36(_.e),t.Y36(d.F0),t.Y36(m.S$),t.Y36(q.t))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-sorting"]],decls:80,vars:11,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-7","px-4"],[1,"mb-4",3,"formGroup","submit"],[1,"col-md-6"],[1,"form-group","mb-3"],[1,"form-label"],["type","text","formControlName","deliveryUnit",1,"form-control"],["formControlName","reviewType",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["formControlName","containerType",1,"form-select"],["type","number","formControlName","classifiedBoxes",1,"form-control"],[1,"text-end"],["type","submit","class","btn btn-primary mt-3 btn-mob",3,"disabled",4,"ngIf"],["type","button","class","btn btn-primary mt-3","disabled","",4,"ngIf"],[1,"col-md-5","px-4"],[1,"table","table-sm","table-bordered"],[1,"text-center","align-middle"],["class","text-center align-middle",4,"ngFor","ngForOf"],[3,"ngStyle"],[1,"text-center","align-middle",2,"background-color","#e9ecef"],[2,"width","130px"],[3,"value"],["type","submit",1,"btn","btn-primary","mt-3","btn-mob",3,"disabled"],[3,"icon"],["type","button","disabled","",1,"btn","btn-primary","mt-3"],[3,"icon","spin"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"form",3),t.NdJ("submit",function(){return o.sendData()}),t.TgZ(4,"div",1),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"label",6),t._uU(8,"BK-Placa"),t.qZA(),t._UZ(9,"input",7),t.qZA(),t.qZA(),t.TgZ(10,"div",4),t.TgZ(11,"div",5),t.TgZ(12,"label",6),t._uU(13,"Tipo Revisi\xf3n"),t.qZA(),t.TgZ(14,"select",8),t.YNc(15,N,2,2,"option",9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",4),t.TgZ(17,"div",5),t.TgZ(18,"label",6),t._uU(19,"Tipo Envase"),t.qZA(),t.TgZ(20,"select",10),t.YNc(21,I,2,2,"option",9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",4),t.TgZ(23,"div",5),t.TgZ(24,"label",6),t._uU(25,"Total Cajas"),t.qZA(),t._UZ(26,"input",11),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",12),t.YNc(28,M,3,3,"button",13),t.YNc(29,F,3,3,"button",14),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"div",15),t.TgZ(31,"table",16),t.TgZ(32,"thead"),t.TgZ(33,"tr",17),t.TgZ(34,"th"),t._uU(35,"#"),t.qZA(),t.TgZ(36,"th"),t._uU(37,"Fecha"),t.qZA(),t.TgZ(38,"th"),t._uU(39,"Inicio"),t.qZA(),t.TgZ(40,"th"),t._uU(41,"Fin"),t.qZA(),t.TgZ(42,"th"),t._uU(43,"Cajas"),t.qZA(),t.TgZ(44,"th"),t._uU(45,"Tiempo"),t._UZ(46,"br"),t._uU(47,"(hh:mm)"),t.qZA(),t.TgZ(48,"th"),t._uU(49,"Productividad"),t._UZ(50,"br"),t._uU(51,"(cjs/hora)"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(52,"tbody"),t.YNc(53,Q,18,17,"tr",18),t.TgZ(54,"tr",17),t.TgZ(55,"th"),t._uU(56,"Total"),t.qZA(),t._UZ(57,"th"),t._UZ(58,"th"),t._UZ(59,"th"),t.TgZ(60,"th"),t._uU(61),t.qZA(),t.TgZ(62,"th"),t._uU(63),t.qZA(),t.TgZ(64,"th",19),t._uU(65),t.qZA(),t.qZA(),t.TgZ(66,"tr"),t._UZ(67,"td"),t.qZA(),t.TgZ(68,"tr",20),t._UZ(69,"td"),t._UZ(70,"td"),t._UZ(71,"td"),t._UZ(72,"td"),t.TgZ(73,"td",21),t.TgZ(74,"small"),t._uU(75,"Meta Productividad"),t.qZA(),t.qZA(),t.TgZ(76,"td"),t._uU(77),t.qZA(),t.TgZ(78,"td"),t._uU(79,"cjs/hora"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(12),t.Q6J("ngForOf",o.typeReviews),t.xp6(6),t.Q6J("ngForOf",o.typeContainers),t.xp6(7),t.Q6J("ngIf",!o.loading),t.xp6(1),t.Q6J("ngIf",o.loading),t.xp6(24),t.Q6J("ngForOf",o.sortingsBySorter),t.xp6(8),t.Oqu(o.totalBoxes),t.xp6(2),t.Oqu(o.gm.convertMsToHM(o.totalGap)),t.xp6(1),t.Q6J("ngStyle",o.getColorTotal()),t.xp6(1),t.Oqu(o.totalProductivity),t.xp6(12),t.Oqu(o.meta))},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,s.EJ,m.sg,s.YN,s.Kr,s.wV,m.O5,f.BN,m.PC],pipes:[m.uU],styles:[""]}),i})();var D=l(8620);function G(i,r){if(1&i&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(null==e?null:e.name)}}function L(i,r){if(1&i&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(null==e?null:e.name)}}const P=function(){return{}};function $(i,r){if(1&i&&(t.TgZ(0,"h4",34),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.Q6J("ngStyle",e.form.value.startTime?e.getColor():t.DdM(2,P)),t.xp6(1),t.hij(" ",e.currentTime," ")}}function H(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",35),t.TgZ(1,"input",36),t.NdJ("click",function(){const u=t.CHM(e).$implicit;return t.oxw().toggleCheckBottle(u)}),t.qZA(),t.TgZ(2,"label",37),t._uU(3),t.qZA(),t.qZA()}if(2&i){const e=r.$implicit;t.xp6(1),t.Q6J("id",e._id)("checked",e.default),t.xp6(1),t.Q6J("for",e._id),t.xp6(1),t.Oqu(e.name)}}function E(i,r){if(1&i&&(t.TgZ(0,"div",38),t.ynx(1,39),t.TgZ(2,"div",40),t.TgZ(3,"label",6),t._uU(4),t.qZA(),t._UZ(5,"input",41),t.qZA(),t.BQk(),t.qZA()),2&i){const e=r.$implicit,o=r.index;t.xp6(1),t.Q6J("formGroupName",o),t.xp6(3),t.Oqu(e.value.subCategory.name)}}function R(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",35),t.TgZ(1,"input",36),t.NdJ("click",function(){const u=t.CHM(e).$implicit;return t.oxw().toggleCheckBox(u)}),t.qZA(),t.TgZ(2,"label",37),t._uU(3),t.qZA(),t.qZA()}if(2&i){const e=r.$implicit;t.xp6(1),t.Q6J("id",e._id)("checked",e.default),t.xp6(1),t.Q6J("for",e._id),t.xp6(1),t.Oqu(e.name)}}function j(i,r){if(1&i&&(t.TgZ(0,"div",42),t.ynx(1,39),t.TgZ(2,"div",40),t.TgZ(3,"label",6),t._uU(4),t.qZA(),t._UZ(5,"input",41),t.qZA(),t.BQk(),t.qZA()),2&i){const e=r.$implicit,o=r.index;t.xp6(1),t.Q6J("formGroupName",o),t.xp6(3),t.Oqu(e.value.subCategory.name)}}const z=function(){return["fas","hourglass-end"]};function V(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){return t.CHM(e),t.oxw().sendData()}),t._UZ(1,"fa-icon",44),t._uU(2," Finalizar "),t.qZA()}if(2&i){const e=t.oxw();let o;t.Q6J("disabled",e.form.invalid||(null==(o=e.formd.get("bottle"))?null:o.invalid)||(null==(o=e.formd.get("box"))?null:o.invalid)),t.xp6(1),t.Q6J("icon",t.DdM(2,z))}}const K=function(){return["fas","spinner"]};function X(i,r){1&i&&(t.TgZ(0,"button",45),t._UZ(1,"fa-icon",46),t._uU(2," Espere... "),t.qZA()),2&i&&(t.xp6(1),t.Q6J("icon",t.DdM(2,K))("spin",!0))}function W(i,r){if(1&i&&(t.TgZ(0,"tr",28),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"date"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td",30),t._uU(17),t.qZA(),t.qZA()),2&i){const e=r.$implicit,o=r.index,n=t.oxw();t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Oqu(t.xi3(5,8,e.endTime,"MM/dd/yy")),t.xp6(3),t.Oqu(t.xi3(8,11,e.startTime,"HH:mm")),t.xp6(3),t.Oqu(t.xi3(11,14,e.endTime,"HH:mm")),t.xp6(3),t.Oqu(e.classifiedBoxes),t.xp6(2),t.Oqu(n.gm.convertMsToHMByItem(e)),t.xp6(1),t.Q6J("ngStyle",n.getColorUni(e)),t.xp6(1),t.Oqu(n.calculateProductivity(e))}}const tt=[{path:"",component:C,children:[{path:"form",component:Y},{path:"form/:id",component:(()=>{class i{constructor(e,o,n,u,a,c,g,rt){this.fb=e,this.sortingService=o,this.campusService=n,this.authService=u,this.route=a,this.router=c,this.common=g,this.gm=rt,this.loading=!1,this.id="",this.bottle={},this.box={},this.user=this.authService.user,this.sortings=[],this.typeReviews=[],this.typeContainers=[],this.sortingsBySorter=[],this.now=new Date,this.totalBoxes=0,this.totalTime=0,this.totalProductivity=0,this.totalGap=0,this.gap=0,this.meta=0,this.metaGreen=0,this.milliHoursLimit=0,this.currentTime="00:00:00",this.formd=this.fb.group({bottle:this.fb.array([]),box:this.fb.array([])}),this.form=this.fb.group({deliveryUnit:["",[s.kI.required]],reviewType:["",[s.kI.required]],containerType:["",[s.kI.required]],classifiedBoxes:["",[s.kI.required]],startTime:[""],endTime:[""],mbfu:[""]}),setInterval(()=>{this.milliHoursLimit>0&&(this.getHourLimit(this.form.value.classifiedBoxes,this.meta),this.countdown(this.form.value.startTime),this.getColor())},1e3)}ngOnInit(){this.getCampus(),this.get(this.id),this.listTypeReviews(),this.listTypeContainers(),this.listCategories(),this.listBySorter()}getCampus(){this.route.params.subscribe(({id:o})=>this.id=o);const{campus:e}=this.user;this.campusService.getCampusByCode(e).subscribe(o=>{o&&(this.meta=o.goalSorting,this.metaGreen=Math.round(.9*this.meta))})}get(e){this.sortingService.get(e).subscribe(o=>{this.form.patchValue(o),this.getHourLimit(this.form.value.classifiedBoxes,this.meta),this.countdown(this.form.value.startTime),this.getColor()})}colorize(e){return e>0&&e<this.metaGreen?{"background-color":"#ff0000",color:"#fff"}:e>=this.metaGreen&&e<this.meta?{"background-color":"#ffd700",color:"#000"}:e>=this.meta?{"background-color":"#00b050",color:"#fff"}:{"background-color":"#fff",color:"#000"}}countdown(e){const o=new Date(e).getTime(),n=(new Date).getTime();this.gap=n-o,this.currentTime=this.gm.convertMsToTime(this.gap)}getHourLimit(e,o){this.milliHoursLimit=e/o*60*60*1e3}getColor(){const e=new Date(this.form.value.startTime).getTime(),n=(new Date).getTime()-e,u=parseInt(this.form.value.classifiedBoxes),a=Math.round(100*(n/36e5+Number.EPSILON))/100,c=Math.round(u/a);return console.log(this.meta,this.metaGreen,c),this.colorize(c)}listTypeReviews(){this.loading=!0,this.sortingService.listTypeReviews().subscribe(e=>{this.typeReviews=e,this.loading=!1})}listTypeContainers(){this.loading=!0,this.sortingService.listTypeContainers().subscribe(e=>{this.typeContainers=e,this.loading=!1})}listCategories(){this.loading=!0,this.sortingService.listCategories().subscribe(e=>{this.bottle=e[0],this.box=e[1],this.loading=!1,e[0].sub.forEach(o=>{o.default&&this.formArrayBottle(o)}),e[1].sub.forEach(o=>{o.default&&this.formArrayBox(o)})})}formArrayBottle(e){this.formd.get("bottle").push(this.fb.group({type:[e._id,[s.kI.required]],subCategory:[e],quantity:["",[s.kI.required]]}))}formArrayBox(e){this.formd.get("box").push(this.fb.group({type:[e._id,[s.kI.required]],subCategory:[e],quantity:["",[s.kI.required]]}))}toggleCheckBottle(e){const o=this.formd.get("bottle");e.default?(e.default=!1,o.removeAt(o.value.findIndex(n=>n.type==e._id))):(e.default=!0,this.formArrayBottle(e))}toggleCheckBox(e){const o=this.formd.get("box");e.default?(e.default=!1,o.removeAt(o.value.findIndex(n=>n.type==e._id))):(e.default=!0,this.formArrayBox(e))}creatItem(){return this.fb.group({type:["",[s.kI.required]],quantity:["",[s.kI.required]]})}get formDataBottle(){return this.formd.get("bottle")}get formDataBox(){return this.formd.get("box")}sendData(){var e,o;const u=[...null===(e=this.formd.get("bottle"))||void 0===e?void 0:e.value,...null===(o=this.formd.get("box"))||void 0===o?void 0:o.value].map(({type:a,quantity:c})=>({type:a,quantity:c}));this.form.patchValue({mbfu:u}),this.form.patchValue({endTime:new Date}),this.sortingService.update(this.id,this.form.value).subscribe(a=>{this.common.showToast("Sorting creado correctamente!!!"),this.router.navigate(["/sorting"])}),this.currentTime="00:00:00",this.milliHoursLimit=0}listBySorter(){this.totalBoxes=0,this.totalTime=0,this.totalProductivity=0,this.totalGap=0,this.loading=!0,this.sortingService.getBySorter(this.user.uid).subscribe(e=>{this.sortingsBySorter=e,this.sortingsBySorter.forEach(o=>{this.totalBoxes+=parseInt(o.classifiedBoxes),this.totalTime+=this.calculateTime(o);const n=new Date(o.startTime).getTime(),a=new Date(o.endTime).getTime()-n;this.totalGap+=a}),this.sortingsBySorter.length>0&&(this.totalProductivity=Math.round(this.totalBoxes/this.totalTime)),this.loading=!1})}calculateTime(e){const o=new Date(e.startTime).getTime(),n=new Date(e.endTime).getTime();return e.gap=n-o,Math.round(100*(e.gap/36e5+Number.EPSILON))/100}calculateProductivity(e){const o=parseInt(e.classifiedBoxes),n=this.calculateTime(e);return Math.round(o/n)}getColorUni(e){const o=new Date(e.startTime).getTime(),u=new Date(e.endTime).getTime()-o,a=parseInt(e.classifiedBoxes),c=Math.round(100*(u/36e5+Number.EPSILON))/100,g=Math.round(a/c);return this.colorize(g)}getColorTotal(){const e=Math.round(100*(this.totalGap/36e5+Number.EPSILON))/100,o=Math.round(this.totalBoxes/e);return this.colorize(o)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(s.qu),t.Y36(y),t.Y36(b.j),t.Y36(_.e),t.Y36(d.gz),t.Y36(d.F0),t.Y36(D.v_),t.Y36(q.t))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-sorting-category"]],decls:103,vars:19,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-7","px-4"],[1,"mb-4",3,"formGroup"],[1,"col-md-6"],[1,"form-group","mb-3"],[1,"form-label"],["type","text","formControlName","deliveryUnit",1,"form-control"],["formControlName","reviewType",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["formControlName","containerType",1,"form-select"],["type","number","formControlName","classifiedBoxes","readonly","",1,"form-control"],["class","py-3 mb-4 fw-bold text-center",3,"ngStyle",4,"ngIf"],[3,"formGroup"],[1,"col-md-6","mb-3"],[1,"card"],[1,"card-header","fw-bold","text-center"],[1,"card-body"],[1,"checks","d-flex","flex-wrap","gap-3","mb-3"],["class","form-check d-flex align-items-center",4,"ngFor","ngForOf"],[1,"forms"],["class","col-md-6","formArrayName","bottle",4,"ngFor","ngForOf"],["class","col-md-6","formArrayName","box",4,"ngFor","ngForOf"],[1,"text-end","mb-3"],["type","submit","class","btn btn-primary mt-3",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-primary mt-3","disabled","",4,"ngIf"],[1,"col-md-5","px-4"],[1,"table","table-sm","table-bordered"],[1,"text-center","align-middle"],["class","text-center align-middle",4,"ngFor","ngForOf"],[3,"ngStyle"],[1,"text-center","align-middle",2,"background-color","#e9ecef"],[2,"width","130px"],[3,"value"],[1,"py-3","mb-4","fw-bold","text-center",3,"ngStyle"],[1,"form-check","d-flex","align-items-center"],["type","checkbox",1,"form-check-input","largerCheckBox","me-2","mt-0",3,"id","checked","click"],[1,"form-check-label",3,"for"],["formArrayName","bottle",1,"col-md-6"],[3,"formGroupName"],[1,"mb-2"],["type","number","formControlName","quantity",1,"form-control"],["formArrayName","box",1,"col-md-6"],["type","submit",1,"btn","btn-primary","mt-3",3,"disabled","click"],[3,"icon"],["type","button","disabled","",1,"btn","btn-primary","mt-3"],[3,"icon","spin"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"form",3),t.TgZ(4,"div",1),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"label",6),t._uU(8,"BK-Placa"),t.qZA(),t._UZ(9,"input",7),t.qZA(),t.qZA(),t.TgZ(10,"div",4),t.TgZ(11,"div",5),t.TgZ(12,"label",6),t._uU(13,"Tipo Revisi\xf3n"),t.qZA(),t.TgZ(14,"select",8),t.YNc(15,G,2,2,"option",9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",4),t.TgZ(17,"div",5),t.TgZ(18,"label",6),t._uU(19,"Tipo Envase"),t.qZA(),t.TgZ(20,"select",10),t.YNc(21,L,2,2,"option",9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",4),t.TgZ(23,"div",5),t.TgZ(24,"label",6),t._uU(25,"Total Cajas"),t.qZA(),t._UZ(26,"input",11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(27,$,2,3,"h4",12),t.TgZ(28,"form",13),t.TgZ(29,"div",1),t.TgZ(30,"div",14),t.TgZ(31,"div",15),t.TgZ(32,"div",16),t._uU(33),t.qZA(),t.TgZ(34,"div",17),t.TgZ(35,"div",18),t.YNc(36,H,4,4,"div",19),t.qZA(),t.TgZ(37,"div",20),t.TgZ(38,"form",1),t.YNc(39,E,6,2,"div",21),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"div",4),t.TgZ(41,"div",15),t.TgZ(42,"div",16),t._uU(43),t.qZA(),t.TgZ(44,"div",17),t.TgZ(45,"div",18),t.YNc(46,R,4,4,"div",19),t.qZA(),t.TgZ(47,"div",20),t.TgZ(48,"form",1),t.YNc(49,j,6,2,"div",22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",23),t.YNc(51,V,3,3,"button",24),t.YNc(52,X,3,3,"button",25),t.qZA(),t.qZA(),t.qZA(),t.TgZ(53,"div",26),t.TgZ(54,"table",27),t.TgZ(55,"thead"),t.TgZ(56,"tr",28),t.TgZ(57,"th"),t._uU(58,"#"),t.qZA(),t.TgZ(59,"th"),t._uU(60,"Fecha"),t.qZA(),t.TgZ(61,"th"),t._uU(62,"Inicio"),t.qZA(),t.TgZ(63,"th"),t._uU(64,"Fin"),t.qZA(),t.TgZ(65,"th"),t._uU(66,"Cajas"),t.qZA(),t.TgZ(67,"th"),t._uU(68,"Tiempo"),t._UZ(69,"br"),t._uU(70,"(hh:mm)"),t.qZA(),t.TgZ(71,"th"),t._uU(72,"Productividad"),t._UZ(73,"br"),t._uU(74,"(cjs/hora)"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(75,"tbody"),t.YNc(76,W,18,17,"tr",29),t.TgZ(77,"tr",28),t.TgZ(78,"th"),t._uU(79,"Total"),t.qZA(),t._UZ(80,"th"),t._UZ(81,"th"),t._UZ(82,"th"),t.TgZ(83,"th"),t._uU(84),t.qZA(),t.TgZ(85,"th"),t._uU(86),t.qZA(),t.TgZ(87,"th",30),t._uU(88),t.qZA(),t.qZA(),t.TgZ(89,"tr"),t._UZ(90,"td"),t.qZA(),t.TgZ(91,"tr",31),t._UZ(92,"td"),t._UZ(93,"td"),t._UZ(94,"td"),t._UZ(95,"td"),t.TgZ(96,"td",32),t.TgZ(97,"small"),t._uU(98,"Meta Productividad"),t.qZA(),t.qZA(),t.TgZ(99,"td"),t._uU(100),t.qZA(),t.TgZ(101,"td"),t._uU(102,"cjs/hora"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(12),t.Q6J("ngForOf",o.typeReviews),t.xp6(6),t.Q6J("ngForOf",o.typeContainers),t.xp6(6),t.Q6J("ngIf",o.form.value.startTime),t.xp6(1),t.Q6J("formGroup",o.formd),t.xp6(5),t.Oqu(null==o.bottle?null:o.bottle.name),t.xp6(3),t.Q6J("ngForOf",o.bottle.sub),t.xp6(3),t.Q6J("ngForOf",o.formDataBottle.controls),t.xp6(4),t.Oqu(null==o.box?null:o.box.name),t.xp6(3),t.Q6J("ngForOf",o.box.sub),t.xp6(3),t.Q6J("ngForOf",o.formDataBox.controls),t.xp6(2),t.Q6J("ngIf",!o.loading),t.xp6(1),t.Q6J("ngIf",o.loading),t.xp6(24),t.Q6J("ngForOf",o.sortingsBySorter),t.xp6(8),t.Oqu(o.totalBoxes),t.xp6(2),t.Oqu(o.gm.convertMsToHM(o.totalGap)),t.xp6(1),t.Q6J("ngStyle",o.getColorTotal()),t.xp6(1),t.Oqu(o.totalProductivity),t.xp6(12),t.Oqu(o.meta))},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,s.EJ,m.sg,s.YN,s.Kr,s.wV,m.O5,m.PC,s.CE,s.x0,f.BN],pipes:[m.uU],styles:["input.largerCheckBox[_ngcontent-%COMP%]{width:25px;height:25px}"]}),i})()},{path:"",redirectTo:"form",pathMatch:"full"}]}];let et=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[d.Bz.forChild(tt)],d.Bz]}),i})();var ot=l(6802),Z=l(801);let it=(()=>{class i{constructor(e){e.addIcons(Z.LM3,Z.yr5,Z.B2l,Z.AnG)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(f.by))},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[m.ez,et,ot.m,s.UX,f.uH]]}),i})()}}]);