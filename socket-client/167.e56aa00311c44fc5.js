"use strict";(self.webpackChunkwms_admin=self.webpackChunkwms_admin||[]).push([[167],{7167:(D,d,r)=>{r.r(d),r.d(d,{PickingModule:()=>M});var a=r(9808),p=r(9539),t=r(4893),v=r(2340),x=r(520);const{endpoint:T}=v.N,m=`${T}/picking`;let u=(()=>{class e{constructor(o){this.http=o}list(){return this.http.get(`${m}/picking-date`)}delete(o){return this.http.delete(`${m}/${o}`)}upload(o,n){const i=new FormData;return i.append("file",o),i.append("date",n),i.append("name",o.name),this.http.post(m,i)}download(){return this.http.get(`${m}/download`,{observe:"body",responseType:"blob"})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(x.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=r(1463);let A=(()=>{class e{constructor(o,n){this.importExcelService=o,this.fileSaverService=n}ngOnInit(){}uuid(){return"_"+Math.random().toString(36).substr(2,9)}download(){this.importExcelService.download().subscribe(o=>this.fileSaverService.save(o,this.uuid()))}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(u),t.Y36(g.m9))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-download-excel"]],decls:11,vars:0,consts:[[1,"card"],[1,"card-body","mb-5"],[1,"card-title"],[1,"row"],[1,"col-md-3","mb-2"],[1,"col-md-4","offset-md-5"],[1,"btn","btn-primary","w-100","d-block","mt-2",3,"click"],[1,"ti-download"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h4",2),t._uU(3,"Descargar Pickings"),t.qZA(),t._UZ(4,"hr"),t.TgZ(5,"div",3),t._UZ(6,"div",4),t.TgZ(7,"div",5),t.TgZ(8,"button",6),t.NdJ("click",function(){return n.download()}),t._UZ(9,"i",7),t._uU(10," Descargar Excel "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA())},styles:[""]}),e})();var c=r(2382),y=r(8929),h=r(1134),f=r(9294);function b(e,l){1&e&&(t.TgZ(0,"div",10),t.TgZ(1,"div",11),t.TgZ(2,"span",12),t._uU(3,"Loading..."),t.qZA(),t.qZA(),t.qZA())}function C(e,l){if(1&e){const o=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"th"),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td"),t.TgZ(9,"button",16),t.NdJ("click",function(){const s=t.CHM(o).$implicit;return t.oxw(2).confirmDestroy(s)}),t._UZ(10,"i",17),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=l.$implicit,n=l.index;t.xp6(2),t.Oqu(n+1),t.xp6(2),t.Oqu(o.name),t.xp6(2),t.Oqu(t.xi3(7,3,o.date,"dd/MM/yyyy"))}}function E(e,l){if(1&e&&(t.TgZ(0,"div",13),t.TgZ(1,"h5"),t._uU(2,"Lista de categorias"),t.qZA(),t.TgZ(3,"table",14),t.TgZ(4,"thead"),t.TgZ(5,"tr"),t.TgZ(6,"th"),t._uU(7,"#"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Nombre"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Fecha"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Opci\xf3n"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"tbody"),t.YNc(15,C,11,6,"tr",15),t.qZA(),t.qZA(),t.qZA()),2&e){const o=t.oxw();t.xp6(15),t.Q6J("ngForOf",o.pickings)}}function _(e,l){1&e&&(t.TgZ(0,"div",29),t.TgZ(1,"p",10),t._uU(2,"Importando..."),t.qZA(),t.qZA())}function I(e,l){if(1&e){const o=t.EpF();t.TgZ(0,"div",18),t.TgZ(1,"h4",19),t._uU(2,"Cargar excel"),t.qZA(),t.TgZ(3,"button",20),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return null==i.modalRef?null:i.modalRef.hide()}),t.TgZ(4,"span",21),t._uU(5,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",22),t.TgZ(7,"div",23),t.TgZ(8,"div",24),t._UZ(9,"input",25),t.TgZ(10,"input",26),t.NdJ("change",function(i){return t.CHM(o),t.oxw().onFileChange(i)}),t.qZA(),t.qZA(),t.TgZ(11,"button",27),t.NdJ("click",function(){return t.CHM(o),t.oxw().submit()}),t._uU(12,"Subir Archivo"),t.qZA(),t.qZA(),t.YNc(13,_,3,0,"div",28),t.qZA()}if(2&e){const o=t.oxw();t.xp6(7),t.Q6J("formGroup",o.myForm),t.xp6(4),t.Q6J("disabled",o.isValid),t.xp6(2),t.Q6J("ngIf",o.loading)}}const F=[{path:"import-excel",component:(()=>{class e{constructor(o,n,i,s){this.importExcelService=o,this.common=n,this.modalService=i,this.datePipe=s,this.loading=!1,this.isValid=!0,this.file=null,this.myForm=new c.cw({file:new c.NI("",[c.kI.required]),fileSource:new c.NI("",[c.kI.required]),date:new c.NI("",[c.kI.required])}),this.pickings=[]}get f(){return this.myForm.controls}ngOnInit(){this.list()}list(){this.importExcelService.list().subscribe(o=>{this.pickings=o})}delete(o){this.importExcelService.delete(o).subscribe(n=>{this.common.showToast(`Archivo Excel ${o} eliminado correctamente!!!`),this.loading=!1,this.list()})}confirmDestroy(o){const n=this;this.common.showConfirm("\xa1\xa1\xa1CUIDADO!!!",`Est\xe1s a punto de eliminar el archivo "${o.name}". \xbfEst\xe1s segur@?`,function(s){s.isConfirmed&&n.delete(o.date)})}openFormModalNew(o,n={}){this.myForm.reset(),this.formatedDate=this.datePipe.transform(Date.now(),"yyyy-MM-dd"),this.myForm.get("date").patchValue(this.formatedDate),n&&this.myForm.patchValue(n),this.modalRef=this.modalService.show(o,{class:"modal-dialog-centered"})}onFileChange(o){o.target.files.length>0&&(this.isValid=!1,this.myForm.patchValue({fileSource:o.target.files[0]}))}submit(){var o;this.loading=!this.loading,this.importExcelService.upload(null===(o=this.myForm.get("fileSource"))||void 0===o?void 0:o.value,this.myForm.value.date).subscribe(n=>{var i;"object"==typeof n&&(this.loading=!1,this.common.showToast(`Archivo Excel ${null===(i=this.myForm.get("fileSource"))||void 0===i?void 0:i.value.name} importado correctamente!!!`),this.myForm.reset(),this.modalRef.hide(),this.list())},n=>{this.loading=!1,this.common.showToastError(n.error.message),this.myForm.reset(),this.modalRef.hide(),this.list()})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(u),t.Y36(y.v),t.Y36(h.tT),t.Y36(a.uU))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-import-excel"]],decls:16,vars:2,consts:[[1,"card"],[1,"card-body","mb-5"],[1,"card-title"],[1,"row"],[1,"col-md-2","mb-2"],["tooltip","Nuevo tipo de cami\xf3n",1,"btn","btn-primary","w-100",3,"click"],[1,"ti-plus"],["class","text-center",4,"ngIf"],["style","overflow-x: auto",4,"ngIf"],["template",""],[1,"text-center"],["role","status",1,"spinner-border",2,"width","3rem","height","3rem"],[1,"sr-only"],[2,"overflow-x","auto"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],["tooltip","Eliminar",1,"btn","btn-outline-danger","btn-sm","ml-2",3,"click"],[1,"ti-trash"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"text-center",3,"formGroup"],[1,"form-group","mb-0","d-flex","align-items-center"],["type","date","formControlName","date",1,"form-control","mr-2"],["type","file","formControlName","file",1,"form-control-file",3,"change"],[1,"btn","btn-success","my-2",3,"disabled","click"],["class","container",4,"ngIf"],[1,"container"]],template:function(o,n){if(1&o){const i=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h4",2),t._uU(3,"Picking| "),t.TgZ(4,"small"),t._uU(5,"Administrar data"),t.qZA(),t.qZA(),t._UZ(6,"hr"),t.TgZ(7,"div",3),t.TgZ(8,"div",4),t.TgZ(9,"button",5),t.NdJ("click",function(){t.CHM(i);const Z=t.MAs(15);return n.openFormModalNew(Z)}),t._UZ(10,"i",6),t._uU(11," Nuevo "),t.qZA(),t.qZA(),t.qZA(),t.YNc(12,b,4,0,"div",7),t.YNc(13,E,16,1,"div",8),t.qZA(),t.qZA(),t.YNc(14,I,14,3,"ng-template",null,9,t.W1O)}2&o&&(t.xp6(12),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading))},directives:[f.i9,a.O5,a.sg,c.JL,c.sg,c.Fj,c.JJ,c.u],pipes:[a.uU],styles:[""]}),e})()},{path:"download-excel",component:A},{path:"",redirectTo:"import-excel",pathMatch:"full"}];let U=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.Bz.forChild(F)],p.Bz]}),e})();var q=r(4466),w=r(2492),N=r(4796),k=r(5898),S=r(9560);let M=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[a.uU],imports:[[a.ez,U,c.UX,c.u5,q.m,f.z8.forRoot(),w.u3.forRoot(),h.zk.forRoot(),N.kn.forRoot(),k.UU.forRoot(),g.pL,S.Ns.forRoot({echarts:()=>r.e(45).then(r.bind(r,8045))})]]}),e})()}}]);