"use strict";(self.webpackChunkwms_admin=self.webpackChunkwms_admin||[]).push([[723],{1723:(S,d,r)=>{r.r(d),r.d(d,{PickingModule:()=>J});var a=r(9808),p=r(9539),s=r(2382),t=r(4893),f=r(2340),Z=r(520);const{endpoint:v}=f.N,m=`${v}/picking`;let x=(()=>{class e{constructor(o){this.http=o}list(){return this.http.get(`${m}/picking-date`)}delete(o){return this.http.delete(`${m}/${o}`)}upload(o,i){const n=new FormData;return n.append("file",o),n.append("date",i),n.append("name",o.name),this.http.post(m,n)}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(Z.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var T=r(8929),u=r(1134),g=r(9294);function A(e,l){1&e&&(t.TgZ(0,"div",10),t.TgZ(1,"div",11),t.TgZ(2,"span",12),t._uU(3,"Loading..."),t.qZA(),t.qZA(),t.qZA())}function y(e,l){if(1&e){const o=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"th"),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td"),t.TgZ(9,"button",16),t.NdJ("click",function(){const c=t.CHM(o).$implicit;return t.oxw(2).confirmDestroy(c)}),t._UZ(10,"i",17),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=l.$implicit,i=l.index;t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Oqu(o.name),t.xp6(2),t.Oqu(t.xi3(7,3,o.date,"dd/MM/yyyy"))}}function C(e,l){if(1&e&&(t.TgZ(0,"div",13),t.TgZ(1,"h5"),t._uU(2,"Lista de categorias"),t.qZA(),t.TgZ(3,"table",14),t.TgZ(4,"thead"),t.TgZ(5,"tr"),t.TgZ(6,"th"),t._uU(7,"#"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Nombre"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Fecha"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Opci\xf3n"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"tbody"),t.YNc(15,y,11,6,"tr",15),t.qZA(),t.qZA(),t.qZA()),2&e){const o=t.oxw();t.xp6(15),t.Q6J("ngForOf",o.pickings)}}function I(e,l){1&e&&(t.TgZ(0,"div",29),t.TgZ(1,"p",10),t._uU(2,"Importando..."),t.qZA(),t.qZA())}function F(e,l){if(1&e){const o=t.EpF();t.TgZ(0,"div",18),t.TgZ(1,"h4",19),t._uU(2,"Cargar excel"),t.qZA(),t.TgZ(3,"button",20),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return null==n.modalRef?null:n.modalRef.hide()}),t.TgZ(4,"span",21),t._uU(5,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",22),t.TgZ(7,"div",23),t.TgZ(8,"div",24),t._UZ(9,"input",25),t.TgZ(10,"input",26),t.NdJ("change",function(n){return t.CHM(o),t.oxw().onFileChange(n)}),t.qZA(),t.qZA(),t.TgZ(11,"button",27),t.NdJ("click",function(){return t.CHM(o),t.oxw().submit()}),t._uU(12,"Subir Archivo"),t.qZA(),t.qZA(),t.YNc(13,I,3,0,"div",28),t.qZA()}if(2&e){const o=t.oxw();t.xp6(7),t.Q6J("formGroup",o.myForm),t.xp6(4),t.Q6J("disabled",o.isValid),t.xp6(2),t.Q6J("ngIf",o.loading)}}const E=[{path:"import-excel",component:(()=>{class e{constructor(o,i,n,c){this.importExcelService=o,this.common=i,this.modalService=n,this.datePipe=c,this.loading=!1,this.isValid=!0,this.file=null,this.myForm=new s.cw({file:new s.NI("",[s.kI.required]),fileSource:new s.NI("",[s.kI.required]),date:new s.NI("",[s.kI.required])}),this.pickings=[]}get f(){return this.myForm.controls}ngOnInit(){this.list()}list(){this.importExcelService.list().subscribe(o=>{this.pickings=o})}delete(o){this.importExcelService.delete(o).subscribe(i=>{this.common.showToast(`Archivo Excel ${o} eliminado correctamente!!!`),this.loading=!1,this.list()})}confirmDestroy(o){const i=this;this.common.showConfirm("\xa1\xa1\xa1CUIDADO!!!",`Est\xe1s a punto de eliminar el archivo "${o.name}". \xbfEst\xe1s segur@?`,function(c){c.isConfirmed&&i.delete(o.date)})}openFormModalNew(o,i={}){this.myForm.reset(),this.formatedDate=this.datePipe.transform(Date.now(),"yyyy-MM-dd"),this.myForm.get("date").patchValue(this.formatedDate),i&&this.myForm.patchValue(i),this.modalRef=this.modalService.show(o,{class:"modal-dialog-centered"})}onFileChange(o){o.target.files.length>0&&(this.isValid=!1,this.myForm.patchValue({fileSource:o.target.files[0]}))}submit(){var o;this.loading=!this.loading,this.importExcelService.upload(null===(o=this.myForm.get("fileSource"))||void 0===o?void 0:o.value,this.myForm.value.date).subscribe(i=>{var n;"object"==typeof i&&(this.loading=!1,this.common.showToast(`Archivo Excel ${null===(n=this.myForm.get("fileSource"))||void 0===n?void 0:n.value.name} importado correctamente!!!`),this.myForm.reset(),this.modalRef.hide(),this.list())},i=>{this.loading=!1,this.common.showToastError(i.error.message),this.myForm.reset(),this.modalRef.hide(),this.list()})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(x),t.Y36(T.v),t.Y36(u.tT),t.Y36(a.uU))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-import-excel"]],decls:16,vars:2,consts:[[1,"card"],[1,"card-body","mb-5"],[1,"card-title"],[1,"row"],[1,"col-md-2","mb-2"],["tooltip","Nuevo tipo de cami\xf3n",1,"btn","btn-primary","w-100",3,"click"],[1,"ti-plus"],["class","text-center",4,"ngIf"],["style","overflow-x: auto",4,"ngIf"],["template",""],[1,"text-center"],["role","status",1,"spinner-border",2,"width","3rem","height","3rem"],[1,"sr-only"],[2,"overflow-x","auto"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],["tooltip","Eliminar",1,"btn","btn-outline-danger","btn-sm","ml-2",3,"click"],[1,"ti-trash"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"text-center",3,"formGroup"],[1,"form-group","mb-0","d-flex","align-items-center"],["type","date","formControlName","date",1,"form-control","mr-2"],["type","file","formControlName","file",1,"form-control-file",3,"change"],[1,"btn","btn-success","my-2",3,"disabled","click"],["class","container",4,"ngIf"],[1,"container"]],template:function(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h4",2),t._uU(3,"Picking| "),t.TgZ(4,"small"),t._uU(5,"Administrar data"),t.qZA(),t.qZA(),t._UZ(6,"hr"),t.TgZ(7,"div",3),t.TgZ(8,"div",4),t.TgZ(9,"button",5),t.NdJ("click",function(){t.CHM(n);const h=t.MAs(15);return i.openFormModalNew(h)}),t._UZ(10,"i",6),t._uU(11," Nuevo "),t.qZA(),t.qZA(),t.qZA(),t.YNc(12,A,4,0,"div",7),t.YNc(13,C,16,1,"div",8),t.qZA(),t.qZA(),t.YNc(14,F,14,3,"ng-template",null,9,t.W1O)}2&o&&(t.xp6(12),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading))},directives:[g.i9,a.O5,a.sg,s.JL,s.sg,s.Fj,s.JJ,s.u],pipes:[a.uU],styles:[""]}),e})()},{path:"",redirectTo:"import-excel",pathMatch:"full"}];let b=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.Bz.forChild(E)],p.Bz]}),e})();var U=r(4466),q=r(1463),N=r(2492),_=r(4796),M=r(5898),k=r(9560);let J=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[a.uU],imports:[[a.ez,b,s.UX,s.u5,U.m,g.z8.forRoot(),N.u3.forRoot(),u.zk.forRoot(),_.kn.forRoot(),M.UU.forRoot(),q.pL,k.Ns.forRoot({echarts:()=>r.e(45).then(r.bind(r,8045))})]]}),e})()}}]);