"use strict";(self.webpackChunkwms_admin=self.webpackChunkwms_admin||[]).push([[181],{9181:(de,A,u)=>{u.r(A),u.d(A,{SortingModule:()=>ue});var p=u(6895),k=u(5263),a=u(4006),m=u(1748),e=u(4650),r=u(4055),g=u(2900),b=u(5954),_=u(743),f=u(5016),h=u(5401);function q(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index,s=e.oxw();return e.KtG(s.toggleEdit(i))}),e._UZ(1,"nb-icon",23),e.qZA()}}function w(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,s=e.oxw();return e.KtG(s.insert(i.value))}),e._UZ(1,"nb-icon",25),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.Q6J("disabled",t.invalid)}}function S(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"tr",10),e.ynx(1,11),e.TgZ(2,"th"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._UZ(5,"input",12)(6,"app-error-message",13),e.qZA(),e.TgZ(7,"td"),e._UZ(8,"input",14)(9,"app-error-message",15),e.qZA(),e.TgZ(10,"td"),e._UZ(11,"nb-checkbox",16),e.qZA(),e.TgZ(12,"td")(13,"div",17),e.YNc(14,q,2,0,"button",18),e.YNc(15,w,2,1,"button",19),e.TgZ(16,"button",20),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.confirmDelete(s.value))}),e._UZ(17,"nb-icon",21),e.qZA()()(),e.BQk(),e.qZA()}if(2&n){const t=c.$implicit,o=c.index,i=e.oxw();e.xp6(1),e.Q6J("formGroupName",o),e.xp6(2),e.Oqu(o+1),e.xp6(11),e.Q6J("ngIf",i.formControlState(o)),e.xp6(1),e.Q6J("ngIf",!i.formControlState(o)),e.xp6(1),e.Q6J("disabled",t.invalid)}}const{sorting:v}=m.b;let N=(()=>{class n{constructor(t,o,i,s,l){this.dialogRef=t,this.generalService=o,this.fb=i,this.toastr=s,this.common=l,this.loading=!1}ngOnInit(){this.reactiveFields()}reactiveFields(){const t={items:new a.Oe([])};this.formHeader=this.fb.group(t),this.getSubCategories()}get itemForm(){return this.formHeader.get("items")}getSubCategories(){this.loading=!0,this.formHeader.setControl("items",this.fb.array([]));const t=this.formHeader.get("items");this.generalService.filtersList$(`${v}/sub-category/${this.category._id}`).subscribe(o=>{console.log(o),o&&o.length>0?Object.keys(o).forEach(i=>{t.push(this.fb.group({_id:new a.NI({value:o[i]._id,disabled:!0}),name:new a.NI({value:o[i].name,disabled:!0}),detail:new a.NI({value:o[i].detail,disabled:!0}),default:new a.NI({value:o[i].default,disabled:!0}),category:new a.NI({value:o[i].category,disabled:!0}),isActive:new a.NI({value:o[i].isActive,disabled:!0})}))}):this.addItem()})}addItem(){this.formHeader.get("items").push(this.creatItem())}creatItem(){return this.fb.group({name:["",[a.kI.required]],detail:["",[a.kI.required]],default:[!1],category:[this.category],isActive:[!0]})}delete(t){this.loading=!0,this.generalService.delete$(`${v}/sub-category/${t.category._id}/${t._id}`).subscribe(o=>{this.toastr.success(`Sub-Categor\xeda ${t.name} eliminado correctamente!`,"\xa1\xc9xito!"),this.getSubCategories(),this.loading=!1})}confirmDelete(t){const o=this;this.common.showConfirm("\xbfEst\xe1s seguro?",`Al eliminar ${t.name}, podr\xedas perder informaci\xf3n que est\xe9 relacionada, si est\xe1s seguro continue por favor.`,function(s){s.isConfirmed&&o.delete(t)})}insert(t){this.loading=!0,t._id?this.generalService.updateNameData$(`${v}/sub-category/${t.category._id}/${t._id}`,t).subscribe(()=>{this.toastr.success("Sub-Categor\xeda fue actualizado correctamente!","\xa1\xc9xito!"),this.finalAction()}):(delete t._id,this.generalService.addData$(`${v}/sub-category/${t.category._id}`,t).subscribe(()=>{this.toastr.success("Sub-Categor\xeda fue creado correctamente!","\xa1\xc9xito!"),this.finalAction()}))}toggleEdit(t){const o=this.formHeader.get("items");"DISABLED"===o.controls[t].status?o.controls[t].enable():o.controls[t].disable()}formControlState(t){return this.formHeader.get("items").controls[t].disabled}closeModal(){this.dialogRef.close()}finalAction(){this.loading=!1,this.getSubCategories()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.X4l),e.Y36(g.m),e.Y36(a.qu),e.Y36(r.quB),e.Y36(b.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sub-categories"]],inputs:{category:"category"},decls:26,vars:3,consts:[["appWindow","","widthSize","lg"],[1,"d-flex","align-items-center","justify-content-between"],["description","Administrar Sub-Categor\xedas","status","primary","icon","keypad-outline",3,"title"],["nbButton","","shape","semi-round","status","primary",3,"click"],["icon","plus-outline"],[1,"table","align-middle"],[3,"formGroup"],["formArrayName","items",4,"ngFor","ngForOf"],[1,"text-end"],["nbButton","","status","danger","shape","semi-round",3,"click"],["formArrayName","items"],[3,"formGroupName"],["formControlName","name","type","text","nbInput","","placeholder","Ingrese nombre","shape","semi-round","fullWidth",""],["controlName","name"],["formControlName","detail","nbInput","","type","text","placeholder","Ingrese detalle","shape","semi-round","fullWidth",""],["controlName","detail"],["formControlName","default"],[1,"d-flex","gap-2"],["nbTooltip","Editar","nbTooltipStatus","info","nbButton","","status","info","size","small","outline","",3,"click",4,"ngIf"],["nbTooltip","Guardar","nbTooltipStatus","primary","nbButton","","status","primary","size","small","outline","",3,"disabled","click",4,"ngIf"],["nbTooltip","Eliminar","nbTooltipStatus","danger","nbButton","","status","danger","size","small","outline","",3,"disabled","click"],["icon","trash-2-outline"],["nbTooltip","Editar","nbTooltipStatus","info","nbButton","","status","info","size","small","outline","",3,"click"],["icon","edit-outline"],["nbTooltip","Guardar","nbTooltipStatus","primary","nbButton","","status","primary","size","small","outline","",3,"disabled","click"],["icon","save-outline"]],template:function(t,o){1&t&&(e.TgZ(0,"nb-card",0)(1,"nb-card-header")(2,"div",1),e._UZ(3,"app-header-info",2),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.addItem()}),e._UZ(5,"nb-icon",4),e._uU(6," Agregar "),e.qZA()()(),e.TgZ(7,"nb-card-body")(8,"table",5)(9,"thead")(10,"tr")(11,"th"),e._uU(12,"#"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Nombre"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Detalle"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Usar"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Opciones"),e.qZA()()(),e.TgZ(21,"tbody",6),e.YNc(22,S,18,5,"tr",7),e.qZA()()(),e.TgZ(23,"nb-card-footer",8)(24,"button",9),e.NdJ("click",function(){return o.closeModal()}),e._uU(25,"Cerrar"),e.qZA()()()),2&t&&(e.xp6(3),e.MGl("title","Sub-categor\xedas de ",o.category.name,""),e.xp6(18),e.Q6J("formGroup",o.formHeader),e.xp6(1),e.Q6J("ngForOf",o.itemForm.controls))},dependencies:[p.sg,p.O5,a.Fj,a.JJ,a.JL,a.sg,a.u,a.x0,a.CE,r.Asz,r.yKW,r.XWE,r.ndF,r.DPz,r.fMN,r.h8i,r.NTf,r.jNv,_.w,f.K,h.H]}),n})();var C=u(384);function U(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),s=e.MAs(8);return e.KtG(i.openModal(s))}),e._UZ(3,"nb-icon",9),e._uU(4," Nuevo "),e.qZA()()()}}function $(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"th"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"div",14)(7,"button",15),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.openSubcategoryModal(s))}),e._UZ(8,"nb-icon",16),e.qZA(),e.TgZ(9,"button",17),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(2),d=e.MAs(8);return e.KtG(l.openModal(d,s))}),e._UZ(10,"nb-icon",18),e.qZA()()()()}if(2&n){const t=c.$implicit,o=c.index;e.xp6(2),e.Oqu(o+1),e.xp6(2),e.Oqu(t.name)}}function J(n,c){if(1&n&&(e.TgZ(0,"div",10)(1,"div",11)(2,"table",12)(3,"thead")(4,"tr")(5,"th"),e._uU(6,"#"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Nombre"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Opci\xf3n"),e.qZA()()(),e.TgZ(11,"tbody"),e.YNc(12,$,11,2,"tr",13),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(12),e.Q6J("ngForOf",t.categories)}}function F(n,c){if(1&n&&(e.TgZ(0,"nb-option",36),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.Q6J("value",t.code),e.xp6(1),e.lnq("",t.code," - ",t.name," - ",t.region," ")}}function B(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"nb-card",19)(1,"nb-card-header")(2,"div",20),e._UZ(3,"app-header-info",21),e.TgZ(4,"button",22),e.NdJ("click",function(){const s=e.CHM(t).dialogRef;return e.KtG(s.close())}),e._UZ(5,"nb-icon",23),e.qZA()()(),e.TgZ(6,"nb-card-body")(7,"div",24)(8,"div",25)(9,"label",26),e._uU(10,"Nombre"),e.TgZ(11,"small"),e._uU(12," *"),e.qZA()(),e._UZ(13,"input",27)(14,"app-error-message",28),e.qZA(),e.TgZ(15,"div",25)(16,"label",26),e._uU(17,"CD "),e.TgZ(18,"small"),e._uU(19," *"),e.qZA()(),e.TgZ(20,"nb-select",29),e.YNc(21,F,2,4,"nb-option",30),e.qZA()(),e.TgZ(22,"div",25)(23,"nb-checkbox",31),e._uU(24,"Activo"),e.qZA()()()(),e.TgZ(25,"nb-card-footer")(26,"div",32)(27,"button",33),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.insertCategory())}),e._UZ(28,"nb-icon",34),e._uU(29," Guardar "),e.qZA(),e.TgZ(30,"button",35),e.NdJ("click",function(){const s=e.CHM(t).dialogRef;return e.KtG(s.close())}),e._uU(31,"Cancelar"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("title",t.title),e.xp6(4),e.Q6J("formGroup",t.formHeader),e.xp6(14),e.Q6J("ngForOf",t.campus),e.xp6(6),e.Q6J("disabled",!t.formHeader.valid)}}const{sorting:y,account:H}=m.b;let I=(()=>{class n{constructor(t,o,i,s,l){this.dialogService=t,this.generalService=o,this.fb=i,this.toastr=s,this.authService=l,this.loading=!1,this.campus=[],this.categories=[],this.title=""}ngOnInit(){this.reactiveFields()}reactiveFields(){const t={_id:[""],name:["",[a.kI.required,a.kI.maxLength(30)]],campus:["",[a.kI.required]],isActive:[!0,[a.kI.required]]};this.formHeader=this.fb.group(t),this.getCampus(),this.getCategories()}resetForm(){this.formHeader.reset({_id:"",name:"",campus:"",isActive:!0})}getCampus(){this.generalService.filtersList$(`${H}/campus`).subscribe(t=>this.campus=t)}getCategories(){this.loading=!0,this.generalService.paramList$(`${y}/category`,{campus:this.authService.user.campus}).subscribe(o=>{this.categories=o||[],this.loading=!1})}openModal(t,o){this.title="Nueva categor\xeda",this.resetForm();const{campus:i}=this.authService.user;this.formHeader.get("campus")?.patchValue(i),o&&(this.title="Editar categor\xeda",this.formHeader.patchValue(o)),this.modalRef=this.dialogService.open(t,{dialogClass:"dialog-limited-height",context:{},closeOnBackdropClick:!0,closeOnEsc:!0})}insertCategory(){this.loading=!0;const{value:t}=this.formHeader;t._id?this.generalService.updateData$(`${y}/category`,t._id,t).subscribe(()=>{this.toastr.success("Categor\xeda fue actualizado correctamente!","\xa1\xc9xito!"),this.finalAction()}):(delete t._id,this.generalService.addData$(`${y}/category`,t).subscribe(()=>{this.toastr.success("Categor\xeda fue creado correctamente!","\xa1\xc9xito!"),this.finalAction()}))}finalAction(){this.loading=!1,this.modalRef.close(),this.getCategories()}openSubcategoryModal(t){this.dialogService.open(N,{dialogClass:"dialog-limited-height",context:{category:t},closeOnBackdropClick:!0,closeOnEsc:!0}).onClose.subscribe(i=>{"ok"===i&&this.getCategories()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.Gln),e.Y36(g.m),e.Y36(a.qu),e.Y36(r.quB),e.Y36(C.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-categories"]],decls:9,vars:2,consts:[[1,"border-0","shadow-sm"],[1,"d-flex","justify-content-between","align-items-center"],["title","CATEGOR\xcdAS","description","Administrar categor\xedas","status","primary","icon","grid-outline"],["class","row justify-content-md-center float-end g-1",4,"ngIf"],["style","overflow-x: auto",4,"ngIf"],["dialog",""],[1,"row","justify-content-md-center","float-end","g-1"],[1,"col-auto"],["nbButton","","fullWidth","","shape","semi-round","status","primary",3,"click"],["icon","plus-outline"],[2,"overflow-x","auto"],[1,"table-responsive"],[1,"table","align-middle"],[4,"ngFor","ngForOf"],[1,"d-flex","gap-2"],["nbTooltip","Sub-categor\xedas","nbTooltipStatus","success","nbButton","","status","success","size","small","outline","",3,"click"],["icon","list-outline"],["nbTooltip","Editar","nbTooltipStatus","info","nbButton","","status","info","size","small","outline","",3,"click"],["icon","edit-outline"],["appWindow","","widthSize","sm"],[1,"d-flex","align-items-center","justify-content-between"],["status","primary","icon","grid-outline",3,"title"],["nbButton","","ghost","","status","basic","shape","semi-round",3,"click"],["icon","close-outline"],[1,"row","g-3",3,"formGroup"],[1,"col-md-12"],[1,"label"],["nbInput","","type","text","placeholder","Ingrese nombre","formControlName","name","shape","semi-round","fullWidth",""],["controlName","name"],["formControlName","campus","placeholder","Seleccione sede","shape","semi-round","fullWidth",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","isActive"],[1,"d-flex","justify-content-end","flex-wrap","gap-2"],["nbButton","","status","primary","shape","semi-round",3,"disabled","click"],["icon","save"],["nbButton","","status","danger","shape","semi-round",3,"click"],[3,"value"]],template:function(t,o){1&t&&(e.TgZ(0,"nb-card",0)(1,"nb-card-header")(2,"div",1),e._UZ(3,"app-header-info",2),e.YNc(4,U,5,0,"div",3),e.qZA()(),e.TgZ(5,"nb-card-body"),e.YNc(6,J,13,1,"div",4),e.qZA()(),e.YNc(7,B,32,4,"ng-template",null,5,e.W1O)),2&t&&(e.xp6(4),e.Q6J("ngIf",2!==o.categories.length),e.xp6(2),e.Q6J("ngIf",!o.loading))},dependencies:[p.sg,p.O5,a.Fj,a.JJ,a.JL,a.sg,a.u,r.Asz,r.yKW,r.XWE,r.ndF,r.DPz,r.fMN,r.h8i,r.rs,r.q51,r.NTf,r.jNv,_.w,f.K,h.H]}),n})();function M(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"th"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"th"),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"div",13)(9,"button",14),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(2),d=e.MAs(12);return e.KtG(l.openModal(d,s))}),e._UZ(10,"nb-icon",15),e.qZA(),e.TgZ(11,"button",16),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.confirmDelete(s))}),e._UZ(12,"nb-icon",17),e.qZA()()()()}if(2&n){const t=c.$implicit,o=c.index;e.xp6(2),e.Oqu(o+1),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.value)}}function E(n,c){if(1&n&&(e.TgZ(0,"div",9)(1,"div",10)(2,"table",11)(3,"thead")(4,"tr")(5,"th"),e._uU(6,"#"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Nombre"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Valor Num\xe9rico"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Opci\xf3n"),e.qZA()()(),e.TgZ(13,"tbody"),e.YNc(14,M,13,3,"tr",12),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(14),e.Q6J("ngForOf",t.containerTypes)}}function O(n,c){if(1&n&&(e.TgZ(0,"nb-option",36),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.Q6J("value",t.code),e.xp6(1),e.lnq("",t.code," - ",t.name," - ",t.region," ")}}function G(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"nb-card",18)(1,"nb-card-header")(2,"div",19),e._UZ(3,"app-header-info",20),e.TgZ(4,"button",21),e.NdJ("click",function(){const s=e.CHM(t).dialogRef;return e.KtG(s.close())}),e._UZ(5,"nb-icon",22),e.qZA()()(),e.TgZ(6,"nb-card-body")(7,"div",23)(8,"div",24)(9,"label",25),e._uU(10,"Nombre"),e.TgZ(11,"small"),e._uU(12," *"),e.qZA()(),e._UZ(13,"input",26)(14,"app-error-message",27),e.qZA(),e.TgZ(15,"div",24)(16,"label",25),e._uU(17,"Valor num\xe9rico"),e.qZA(),e._UZ(18,"input",28)(19,"app-error-message",29),e.qZA(),e.TgZ(20,"div",24)(21,"label",25),e._uU(22,"CD "),e.TgZ(23,"small"),e._uU(24," *"),e.qZA()(),e.TgZ(25,"nb-select",30),e.YNc(26,O,2,4,"nb-option",31),e.qZA()()()(),e.TgZ(27,"nb-card-footer")(28,"div",32)(29,"button",33),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.insertContainerType())}),e._UZ(30,"nb-icon",34),e._uU(31," Guardar "),e.qZA(),e.TgZ(32,"button",35),e.NdJ("click",function(){const s=e.CHM(t).dialogRef;return e.KtG(s.close())}),e._uU(33,"Cancelar"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("title",t.title),e.xp6(4),e.Q6J("formGroup",t.formHeader),e.xp6(19),e.Q6J("ngForOf",t.campus),e.xp6(3),e.Q6J("disabled",!t.formHeader.valid)}}const{sorting:T,account:Y}=m.b;let R=(()=>{class n{constructor(t,o,i,s,l,d){this.dialogService=t,this.generalService=o,this.fb=i,this.toastr=s,this.common=l,this.authService=d,this.loading=!1,this.campus=[],this.containerTypes=[],this.title=""}ngOnInit(){this.reactiveFields()}reactiveFields(){const t={_id:[""],name:["",[a.kI.required,a.kI.maxLength(30)]],campus:["",[a.kI.required]],value:["",[a.kI.maxLength(40)]]};this.formHeader=this.fb.group(t),this.getCampus(),this.getContainerTypes()}getCampus(){this.generalService.filtersList$(`${Y}/campus`).subscribe(t=>this.campus=t)}getContainerTypes(){this.loading=!0,this.generalService.paramList$(`${T}/type-container`,{campus:this.authService.user.campus}).subscribe(o=>{this.containerTypes=o||[],this.loading=!1})}openModal(t,o){this.title="Nuevo tipo de envase",this.formHeader.reset();const{campus:i}=this.authService.user;this.formHeader.get("campus")?.patchValue(i),o&&(this.title="Editar tipo de envase",this.formHeader.patchValue(o)),this.modalRef=this.dialogService.open(t,{dialogClass:"dialog-limited-height",context:{},closeOnBackdropClick:!0,closeOnEsc:!0})}insertContainerType(){this.loading=!0;const{value:t}=this.formHeader;t._id?this.generalService.updateData$(`${T}/type-container`,t._id,t).subscribe(()=>{this.toastr.success("Tipo Contenedor fue actualizado correctamente!","\xa1\xc9xito!"),this.finalAction()}):(delete t._id,this.generalService.addData$(`${T}/type-container`,t).subscribe(()=>{this.toastr.success("Tipo Contenedor fue creado correctamente!","\xa1\xc9xito!"),this.finalAction()}))}deleteContainerType(t){this.loading=!0,this.generalService.delete$(`${T}/type-container/${t._id}`).subscribe(()=>{this.toastr.success(`Tipo Contenedor ${t.name} eliminado correctamente!`,"\xa1\xc9xito!"),this.getContainerTypes(),this.loading=!1})}confirmDelete(t){const o=this;this.common.showConfirm("\xbfEst\xe1s seguro?",`Al eliminar ${t.name}, podr\xedas perder informaci\xf3n que est\xe9 relacionada, si est\xe1s seguro continue por favor.`,function(s){s.isConfirmed&&o.deleteContainerType(t)})}finalAction(){this.loading=!1,this.modalRef.close(),this.getContainerTypes()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.Gln),e.Y36(g.m),e.Y36(a.qu),e.Y36(r.quB),e.Y36(b.v),e.Y36(C.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-container-type"]],decls:13,vars:1,consts:[[1,"border-0","shadow-sm"],[1,"d-flex","justify-content-between","align-items-center"],["title","TIPO DE ENVASE","description","Administrar tipos de envases","status","primary","icon","book-outline"],[1,"row","justify-content-md-center","float-end","g-1"],[1,"col-auto"],["nbButton","","fullWidth","","shape","semi-round","status","primary",3,"click"],["icon","plus-outline"],["style","overflow-x: auto",4,"ngIf"],["dialog",""],[2,"overflow-x","auto"],[1,"table-responsive"],[1,"table","align-middle"],[4,"ngFor","ngForOf"],[1,"d-flex","gap-2"],["nbTooltip","Editar","nbTooltipStatus","info","nbButton","","status","info","size","small","outline","",3,"click"],["icon","edit-outline"],["nbTooltip","Eliminar","nbTooltipStatus","danger","nbButton","","status","danger","size","small","outline","",3,"click"],["icon","trash-2-outline"],["appWindow","","widthSize","sm"],[1,"d-flex","align-items-center","justify-content-between"],["status","primary","icon","book-outline",3,"title"],["nbButton","","ghost","","status","basic","shape","semi-round",3,"click"],["icon","close-outline"],[1,"row","g-3",3,"formGroup"],[1,"col-md-12"],[1,"label"],["nbInput","","type","text","placeholder","Ingrese nombre","formControlName","name","shape","semi-round","fullWidth",""],["controlName","name"],["nbInput","","type","number","placeholder","Ingrese valor numerico","formControlName","value","shape","semi-round","fullWidth","","min","0"],["controlName","value"],["formControlName","campus","placeholder","Seleccione sede","shape","semi-round","fullWidth",""],[3,"value",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end","flex-wrap","gap-2"],["nbButton","","status","primary","shape","semi-round",3,"disabled","click"],["icon","save"],["nbButton","","status","danger","shape","semi-round",3,"click"],[3,"value"]],template:function(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"nb-card",0)(1,"nb-card-header")(2,"div",1),e._UZ(3,"app-header-info",2),e.TgZ(4,"div",3)(5,"div",4)(6,"button",5),e.NdJ("click",function(){e.CHM(i);const l=e.MAs(12);return e.KtG(o.openModal(l))}),e._UZ(7,"nb-icon",6),e._uU(8," Nuevo "),e.qZA()()()()(),e.TgZ(9,"nb-card-body"),e.YNc(10,E,15,1,"div",7),e.qZA()(),e.YNc(11,G,34,4,"ng-template",null,8,e.W1O)}2&t&&(e.xp6(10),e.Q6J("ngIf",!o.loading))},dependencies:[p.sg,p.O5,a.Fj,a.wV,a.JJ,a.JL,a.qQ,a.sg,a.u,r.Asz,r.yKW,r.XWE,r.ndF,r.DPz,r.fMN,r.h8i,r.rs,r.q51,r.jNv,_.w,f.K,h.H]}),n})();function D(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"th"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"div",13)(7,"button",14),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(2),d=e.MAs(12);return e.KtG(l.openModal(d,s))}),e._UZ(8,"nb-icon",15),e.qZA(),e.TgZ(9,"button",16),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.confirmDelete(s))}),e._UZ(10,"nb-icon",17),e.qZA()()()()}if(2&n){const t=c.$implicit,o=c.index;e.xp6(2),e.Oqu(o+1),e.xp6(2),e.Oqu(t.name)}}function K(n,c){if(1&n&&(e.TgZ(0,"div",9)(1,"div",10)(2,"table",11)(3,"thead")(4,"tr")(5,"th"),e._uU(6,"#"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Nombre"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Opci\xf3n"),e.qZA()()(),e.TgZ(11,"tbody"),e.YNc(12,D,11,2,"tr",12),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(12),e.Q6J("ngForOf",t.reviewTypes)}}function z(n,c){if(1&n&&(e.TgZ(0,"nb-option",34),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.Q6J("value",t.code),e.xp6(1),e.lnq("",t.code," - ",t.name," - ",t.region," ")}}function Q(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"nb-card",18)(1,"nb-card-header")(2,"div",19),e._UZ(3,"app-header-info",20),e.TgZ(4,"button",21),e.NdJ("click",function(){const s=e.CHM(t).dialogRef;return e.KtG(s.close())}),e._UZ(5,"nb-icon",22),e.qZA()()(),e.TgZ(6,"nb-card-body")(7,"div",23)(8,"div",24)(9,"label",25),e._uU(10,"Nombre"),e.TgZ(11,"small"),e._uU(12," *"),e.qZA()(),e._UZ(13,"input",26)(14,"app-error-message",27),e.qZA(),e.TgZ(15,"div",24)(16,"label",25),e._uU(17,"CD "),e.TgZ(18,"small"),e._uU(19," *"),e.qZA()(),e.TgZ(20,"nb-select",28),e.YNc(21,z,2,4,"nb-option",29),e.qZA()()()(),e.TgZ(22,"nb-card-footer")(23,"div",30)(24,"button",31),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.insertReviewType())}),e._UZ(25,"nb-icon",32),e._uU(26," Guardar "),e.qZA(),e.TgZ(27,"button",33),e.NdJ("click",function(){const s=e.CHM(t).dialogRef;return e.KtG(s.close())}),e._uU(28,"Cancelar"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("title",t.title),e.xp6(4),e.Q6J("formGroup",t.formHeader),e.xp6(14),e.Q6J("ngForOf",t.campus),e.xp6(3),e.Q6J("disabled",!t.formHeader.valid)}}const{sorting:Z,account:W}=m.b;let j=(()=>{class n{constructor(t,o,i,s,l,d){this.dialogService=t,this.generalService=o,this.fb=i,this.toastr=s,this.common=l,this.authService=d,this.loading=!1,this.campus=[],this.reviewTypes=[],this.title=""}ngOnInit(){this.reactiveFields()}reactiveFields(){const t={_id:[""],name:["",[a.kI.required,a.kI.maxLength(30)]],campus:["",[a.kI.required]]};this.formHeader=this.fb.group(t),this.getCampus(),this.getReviewTypes()}getCampus(){this.generalService.filtersList$(`${W}/campus`).subscribe(t=>this.campus=t)}getReviewTypes(){this.loading=!0,this.generalService.paramList$(`${Z}/type-review`,{campus:this.authService.user.campus}).subscribe(o=>{this.reviewTypes=o||[],this.loading=!1})}openModal(t,o){this.title="Nuevo tipo revisi\xf3n",this.formHeader.reset();const{campus:i}=this.authService.user;this.formHeader.get("campus")?.patchValue(i),o&&(this.title="Editar tipo revisi\xf3n",this.formHeader.patchValue(o)),this.modalRef=this.dialogService.open(t,{dialogClass:"dialog-limited-height",context:{},closeOnBackdropClick:!0,closeOnEsc:!0})}insertReviewType(){this.loading=!0;const{value:t}=this.formHeader;t._id?this.generalService.updateData$(`${Z}/type-review`,t._id,t).subscribe(()=>{this.toastr.success("Tipo Revisi\xf3n fue actualizado correctamente!","\xa1\xc9xito!"),this.finalAction()}):(delete t._id,this.generalService.addData$(`${Z}/type-review`,t).subscribe(()=>{this.toastr.success("Tipo Revisi\xf3n fue creado correctamente!","\xa1\xc9xito!"),this.finalAction()}))}deleteReviewType(t){this.loading=!0,this.generalService.delete$(`${Z}/type-review/${t._id}`).subscribe(()=>{this.toastr.success(`Tipo Revisi\xf3n ${t.name} eliminado correctamente!`,"\xa1\xc9xito!"),this.getReviewTypes(),this.loading=!1})}confirmDelete(t){const o=this;this.common.showConfirm("\xbfEst\xe1s seguro?",`Al eliminar ${t.name}, podr\xedas perder informaci\xf3n que est\xe9 relacionada, si est\xe1s seguro continue por favor.`,function(s){s.isConfirmed&&o.deleteReviewType(t)})}finalAction(){this.loading=!1,this.modalRef.close(),this.getReviewTypes()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.Gln),e.Y36(g.m),e.Y36(a.qu),e.Y36(r.quB),e.Y36(b.v),e.Y36(C.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-review-type"]],decls:13,vars:1,consts:[[1,"border-0","shadow-sm"],[1,"d-flex","justify-content-between","align-items-center"],["title","TIPO REVISI\xd3N","description","Administrar tipos de revisi\xf3n","status","primary","icon","inbox-outline"],[1,"row","justify-content-md-center","float-end","g-1"],[1,"col-auto"],["nbButton","","fullWidth","","shape","semi-round","status","primary",3,"click"],["icon","plus-outline"],["style","overflow-x: auto",4,"ngIf"],["dialog",""],[2,"overflow-x","auto"],[1,"table-responsive"],[1,"table","align-middle"],[4,"ngFor","ngForOf"],[1,"d-flex","gap-2"],["nbTooltip","Editar","nbTooltipStatus","info","nbButton","","status","info","size","small","outline","",3,"click"],["icon","edit-outline"],["nbTooltip","Eliminar","nbTooltipStatus","danger","nbButton","","status","danger","size","small","outline","",3,"click"],["icon","trash-2-outline"],["appWindow","","widthSize","sm"],[1,"d-flex","align-items-center","justify-content-between"],["status","primary","icon","inbox-outline",3,"title"],["nbButton","","ghost","","status","basic","shape","semi-round",3,"click"],["icon","close-outline"],[1,"row","g-3",3,"formGroup"],[1,"col-md-12"],[1,"label"],["nbInput","","type","text","placeholder","Ingrese nombre","formControlName","name","shape","semi-round","fullWidth",""],["controlName","name"],["formControlName","campus","placeholder","Seleccione sede","shape","semi-round","fullWidth",""],[3,"value",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end","flex-wrap","gap-2"],["nbButton","","status","primary","shape","semi-round",3,"disabled","click"],["icon","save"],["nbButton","","status","danger","shape","semi-round",3,"click"],[3,"value"]],template:function(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"nb-card",0)(1,"nb-card-header")(2,"div",1),e._UZ(3,"app-header-info",2),e.TgZ(4,"div",3)(5,"div",4)(6,"button",5),e.NdJ("click",function(){e.CHM(i);const l=e.MAs(12);return e.KtG(o.openModal(l))}),e._UZ(7,"nb-icon",6),e._uU(8," Nuevo "),e.qZA()()()()(),e.TgZ(9,"nb-card-body"),e.YNc(10,K,13,1,"div",7),e.qZA()(),e.YNc(11,Q,29,4,"ng-template",null,8,e.W1O)}2&t&&(e.xp6(10),e.Q6J("ngIf",!o.loading))},dependencies:[p.sg,p.O5,a.Fj,a.JJ,a.JL,a.sg,a.u,r.Asz,r.yKW,r.XWE,r.ndF,r.DPz,r.fMN,r.h8i,r.rs,r.q51,r.jNv,_.w,f.K,h.H]}),n})();function P(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"th"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"div",13)(7,"button",14),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(2),d=e.MAs(12);return e.KtG(l.openModal(d,s))}),e._UZ(8,"nb-icon",15),e.qZA(),e.TgZ(9,"button",16),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.confirmDelete(s))}),e._UZ(10,"nb-icon",17),e.qZA()()()()}if(2&n){const t=c.$implicit,o=c.index;e.xp6(2),e.Oqu(o+1),e.xp6(2),e.Oqu(t.name)}}function L(n,c){if(1&n&&(e.TgZ(0,"div",9)(1,"div",10)(2,"table",11)(3,"thead")(4,"tr")(5,"th"),e._uU(6,"#"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Nombre"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Opci\xf3n"),e.qZA()()(),e.TgZ(11,"tbody"),e.YNc(12,P,11,2,"tr",12),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(12),e.Q6J("ngForOf",t.plaques)}}function V(n,c){if(1&n&&(e.TgZ(0,"nb-option",35),e._uU(1),e.qZA()),2&n){const t=c.$implicit;e.Q6J("value",t.code),e.xp6(1),e.lnq("",t.code," - ",t.name," - ",t.region," ")}}function X(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"nb-card",18)(1,"nb-card-header")(2,"div",19),e._UZ(3,"app-header-info",20),e.TgZ(4,"button",21),e.NdJ("click",function(){const s=e.CHM(t).dialogRef;return e.KtG(s.close())}),e._UZ(5,"nb-icon",22),e.qZA()()(),e.TgZ(6,"nb-card-body")(7,"div",23)(8,"div",24)(9,"label",25),e._uU(10,"Nombre"),e.TgZ(11,"small"),e._uU(12," *"),e.qZA()(),e._UZ(13,"input",26)(14,"app-error-message",27),e.qZA(),e.TgZ(15,"div",24)(16,"label",25),e._uU(17,"CD "),e.TgZ(18,"small"),e._uU(19," *"),e.qZA()(),e.TgZ(20,"nb-select",28),e.YNc(21,V,2,4,"nb-option",29),e.qZA()(),e.TgZ(22,"div",24)(23,"nb-checkbox",30),e._uU(24,"Activo"),e.qZA()()()(),e.TgZ(25,"nb-card-footer")(26,"div",31)(27,"button",32),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.insertPlaque())}),e._UZ(28,"nb-icon",33),e._uU(29," Guardar "),e.qZA(),e.TgZ(30,"button",34),e.NdJ("click",function(){const s=e.CHM(t).dialogRef;return e.KtG(s.close())}),e._uU(31,"Cancelar"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("title",t.title),e.xp6(4),e.Q6J("formGroup",t.formHeader),e.xp6(14),e.Q6J("ngForOf",t.campus),e.xp6(6),e.Q6J("disabled",!t.formHeader.valid)}}const{sorting:x,account:ee}=m.b;let te=(()=>{class n{constructor(t,o,i,s,l,d){this.dialogService=t,this.fb=o,this.generalService=i,this.toastr=s,this.common=l,this.authService=d,this.loading=!1,this.campus=[],this.plaques=[],this.title=""}ngOnInit(){this.reactiveFields()}reactiveFields(){const t={_id:[""],name:["",[a.kI.required,a.kI.maxLength(10)]],campus:["",[a.kI.required]],isActive:[!0,[a.kI.required]]};this.formHeader=this.fb.group(t),this.getCampus(),this.getPlaques()}resetForm(){this.formHeader.reset({_id:"",name:"",campus:"",isActive:!0})}getCampus(){this.generalService.filtersList$(`${ee}/campus`).subscribe(t=>this.campus=t)}getPlaques(){this.loading=!0,this.generalService.paramList$(`${x}/bk-plaque`,{campus:this.authService.user.campus}).subscribe(o=>{this.plaques=o||[],this.loading=!1})}openModal(t,o){this.title="Nueva BK-Placa",this.resetForm();const{campus:i}=this.authService.user;this.formHeader.get("campus")?.patchValue(i),o&&(this.title="Editar BK-Placa",this.formHeader.patchValue(o)),this.modalRef=this.dialogService.open(t,{dialogClass:"dialog-limited-height",context:{},closeOnBackdropClick:!0,closeOnEsc:!0})}insertPlaque(){this.loading=!0;const{value:t}=this.formHeader;t._id?this.generalService.updateData$(`${x}/bk-plaque`,t._id,t).subscribe(()=>{this.toastr.success("BK-Placa fue actualizado correctamente!","\xa1\xc9xito!"),this.finalAction()}):(delete t._id,this.generalService.addData$(`${x}/bk-plaque`,t).subscribe(()=>{this.toastr.success("BK-Placa fue creado correctamente!","\xa1\xc9xito!"),this.finalAction()}))}deletePlaque(t){this.loading=!0,this.generalService.delete$(`${x}/bk-plaque/${t._id}`).subscribe(()=>{this.toastr.success(`BK-Placa ${t.name} eliminado correctamente!`,"\xa1\xc9xito!"),this.getPlaques(),this.loading=!1})}confirmDelete(t){const o=this;this.common.showConfirm("\xbfEst\xe1s seguro?",`Al eliminar ${t.name}, podr\xedas perder informaci\xf3n que est\xe9 relacionada, si est\xe1s seguro continue por favor.`,function(s){s.isConfirmed&&o.deletePlaque(t)})}finalAction(){this.loading=!1,this.modalRef.close(),this.getPlaques()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.Gln),e.Y36(a.qu),e.Y36(g.m),e.Y36(r.quB),e.Y36(b.v),e.Y36(C.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-bk"]],decls:13,vars:1,consts:[[1,"border-0","shadow-sm"],[1,"d-flex","justify-content-between","align-items-center"],["title","BK-PLACA","description","Administrar bk-placas","status","primary","icon","credit-card-outline"],[1,"row","justify-content-md-center","float-end","g-1"],[1,"col-auto"],["nbButton","","fullWidth","","shape","semi-round","status","primary",3,"click"],["icon","plus-outline"],["style","overflow-x: auto",4,"ngIf"],["dialog",""],[2,"overflow-x","auto"],[1,"table-responsive"],[1,"table","align-middle"],[4,"ngFor","ngForOf"],[1,"d-flex","gap-2"],["nbTooltip","Editar","nbTooltipStatus","info","nbButton","","status","info","size","small","outline","",3,"click"],["icon","edit-outline"],["nbTooltip","Eliminar","nbTooltipStatus","danger","nbButton","","status","danger","size","small","outline","",3,"click"],["icon","trash-2-outline"],["appWindow","","widthSize","sm"],[1,"d-flex","align-items-center","justify-content-between"],["status","primary","icon","credit-card-outline",3,"title"],["nbButton","","ghost","","status","basic","shape","semi-round",3,"click"],["icon","close-outline"],[1,"row","g-3",3,"formGroup"],[1,"col-md-12"],[1,"label"],["nbInput","","type","text","placeholder","Ingrese nombre","formControlName","name","shape","semi-round","fullWidth",""],["controlName","name"],["formControlName","campus","placeholder","Seleccione sede","shape","semi-round","fullWidth",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","isActive"],[1,"d-flex","justify-content-end","flex-wrap","gap-2"],["nbButton","","status","primary","shape","semi-round",3,"disabled","click"],["icon","save"],["nbButton","","status","danger","shape","semi-round",3,"click"],[3,"value"]],template:function(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"nb-card",0)(1,"nb-card-header")(2,"div",1),e._UZ(3,"app-header-info",2),e.TgZ(4,"div",3)(5,"div",4)(6,"button",5),e.NdJ("click",function(){e.CHM(i);const l=e.MAs(12);return e.KtG(o.openModal(l))}),e._UZ(7,"nb-icon",6),e._uU(8," Nuevo "),e.qZA()()()()(),e.TgZ(9,"nb-card-body"),e.YNc(10,L,13,1,"div",7),e.qZA()(),e.YNc(11,X,32,4,"ng-template",null,8,e.W1O)}2&t&&(e.xp6(10),e.Q6J("ngIf",!o.loading))},dependencies:[p.sg,p.O5,a.Fj,a.JJ,a.JL,a.sg,a.u,r.Asz,r.yKW,r.XWE,r.ndF,r.DPz,r.fMN,r.h8i,r.rs,r.q51,r.NTf,r.jNv,_.w,f.K,h.H]}),n})();var oe=u(3947);const{sorting:ne}=m.b,ie=[{path:"categorias",component:I},{path:"tipo-envase",component:R},{path:"tipo-revision",component:j},{path:"bk",component:te},{path:"descargar-excel",component:(()=>{class n{constructor(t,o){this.generalService=t,this.fileSaverService=o,this.loading=!1}ngOnInit(){}uuid(){return"_"+Math.random().toString(36).substr(2,9)}download(){this.loading=!0,this.generalService.file$(`${ne}/download`).subscribe(t=>{this.fileSaverService.save(t,this.uuid()),this.loading=!1})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.m),e.Y36(oe.m9))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-download-excel"]],decls:7,vars:0,consts:[[1,"border-0","shadow-sm"],["title","SORTING","description","Descargar excel","status","primary","icon","cloud-download-outline"],[1,"text-center"],["nbButton","","shape","semi-round","status","primary",3,"click"],["icon","download-outline"]],template:function(t,o){1&t&&(e.TgZ(0,"nb-card",0)(1,"nb-card-header"),e._UZ(2,"app-header-info",1),e.qZA(),e.TgZ(3,"nb-card-body",2)(4,"button",3),e.NdJ("click",function(){return o.download()}),e._UZ(5,"nb-icon",4),e._uU(6,"Descargar"),e.qZA()()())},dependencies:[r.Asz,r.yKW,r.ndF,r.DPz,r.fMN,_.w]}),n})()},{path:"",redirectTo:"categorias",pathMatch:"full"}];let se=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[k.Bz.forChild(ie),k.Bz]}),n})();var re=u(1765),ae=u(798),ce=u(328),le=u(8542);let ue=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,se,le.Y,ae.j,ce.y,re.s]}),n})()}}]);