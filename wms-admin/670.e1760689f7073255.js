"use strict";(self.webpackChunkwms_admin=self.webpackChunkwms_admin||[]).push([[670],{4670:(Tt,N,u)=>{u.r(N),u.d(N,{ControlModule:()=>Zt});var d=u(6895),f=u(5263),c=u(4006),m=u(1748),t=u(4650),r=u(4055),Z=u(5954),g=u(2900),h=u(384),_=u(743),T=u(5016),v=u(4333),C=u(5401);function M(i,a){if(1&i&&(t.TgZ(0,"button",37),t._UZ(1,"nb-icon",38),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("nbPopover",e.observation)}}function O(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"th"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t._UZ(12,"br"),t.TgZ(13,"small",30),t._uU(14),t.qZA()(),t.TgZ(15,"td"),t._uU(16),t._UZ(17,"br"),t.TgZ(18,"small"),t._uU(19),t.qZA()(),t.TgZ(20,"td"),t._uU(21),t._UZ(22,"br"),t.TgZ(23,"small"),t._uU(24),t.qZA()(),t.TgZ(25,"td"),t._uU(26),t.qZA(),t.TgZ(27,"td"),t._uU(28),t.ALo(29,"date"),t.qZA(),t.TgZ(30,"td"),t.YNc(31,M,2,1,"button",31),t.qZA(),t.TgZ(32,"td")(33,"div",32)(34,"button",33),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(),p=t.MAs(64);return t.KtG(l.openRegForm(p,s))}),t._UZ(35,"nb-icon",34),t.qZA(),t.TgZ(36,"button",35),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.confirmDestroy(s))}),t._UZ(37,"nb-icon",36),t.qZA()()()()}if(2&i){const e=a.$implicit,o=a.index,n=t.oxw();t.xp6(2),t.Oqu((n.params.page-1)*n.params.pageSize+o+1),t.xp6(2),t.Oqu(t.xi3(5,14,e.arrival,"HH:mm a")),t.xp6(3),t.Oqu(e.truck.plaque),t.xp6(2),t.Oqu(null==e.truck.type?null:e.truck.type.name),t.xp6(2),t.AsE(" ",e.driver.firstName," ",e.driver.lastName," "),t.xp6(3),t.hij("C\xe9dula: ",e.driver.document,""),t.xp6(2),t.hij(" ",null==e.unloadBay?null:e.unloadBay.name," "),t.xp6(3),t.Oqu(null==e.unloadLift?null:e.unloadLift.name),t.xp6(2),t.hij(" ",null==e.loadBay?null:e.loadBay.name," "),t.xp6(3),t.Oqu(null==e.loadLift?null:e.loadLift.name),t.xp6(2),t.Oqu(e.state),t.xp6(2),t.Oqu(t.lcZ(29,17,e.createdAt)),t.xp6(3),t.Q6J("ngIf",e.observation)}}function L(i,a){if(1&i&&(t.TgZ(0,"nb-option",56),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function B(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"nb-card",39)(1,"nb-card-header")(2,"div",40),t._UZ(3,"app-header-info",41),t.TgZ(4,"button",42),t.NdJ("click",function(){const s=t.CHM(e).dialogRef;return t.KtG(s.close())}),t._UZ(5,"nb-icon",43),t.qZA()()(),t.TgZ(6,"nb-card-body")(7,"div",44)(8,"div",45)(9,"h6"),t._uU(10),t.qZA(),t.TgZ(11,"p",46),t._uU(12),t.qZA()(),t.TgZ(13,"div",45)(14,"label",47),t._uU(15,"Estado"),t.qZA(),t.TgZ(16,"nb-select",48),t.YNc(17,L,2,2,"nb-option",49),t.qZA()(),t.TgZ(18,"div",45)(19,"label",47),t._uU(20,"Observaci\xf3n"),t.qZA(),t.TgZ(21,"textarea",50),t._uU(22," "),t.qZA(),t._UZ(23,"app-error-message",51),t.qZA()()(),t.TgZ(24,"nb-card-footer")(25,"div",52)(26,"button",53),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.save())}),t._UZ(27,"nb-icon",54),t._uU(28," Guardar "),t.qZA(),t.TgZ(29,"button",55),t.NdJ("click",function(){const s=t.CHM(e).dialogRef;return t.KtG(s.close())}),t._uU(30,"Cancelar"),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(7),t.Q6J("formGroup",e.regForm),t.xp6(3),t.hij("Veh\xedculo: ",e.registry.truck.plaque,""),t.xp6(2),t.AsE("Conductor: ",e.registry.driver.firstName," ",e.registry.driver.lastName,""),t.xp6(5),t.Q6J("ngForOf",e.status),t.xp6(9),t.Q6J("disabled",!e.regForm.valid)}}const w=function(i,a,e){return{id:"registries",itemsPerPage:i,currentPage:a,totalItems:e}},{control:q}=m.b;let I=(()=>{class i{constructor(e,o,n,s,l,p,b){this.fb=e,this.dialogService=o,this.common=n,this.toastr=s,this.generalService=l,this.datePipe=p,this.authService=b,this.loading=!1,this.status=["LLEGADA","DESCARGANDO","DESCARGADO","CARGA","CARGANDO","CARGADO","SALIDA"],this.dateForm=this.fb.group({fecha:[new Date]}),this.forma=this.fb.group({field:["document"],query:["",[c.kI.required]]}),this.registries=[],this.totalRegistries=0,this.perPage=this.fb.control("8"),this.page=1,this.params={page:this.page,pageSize:this.perPage.value,campus:this.authService.user.campus},this.field=this.fb.control("plaque"),this.query=this.fb.control("")}ngOnInit(){this.reactiveFields(),this.dateForm.valueChanges.subscribe(e=>{this.filtrarByDate(e.fecha)})}reactiveFields(){const e={state:["LLEGADA"],observation:["",[c.kI.maxLength(300)]]};this.formatedDate=this.datePipe.transform(this.dateForm.controls.fecha.value,"yyyy-MM-dd"),this.params.fecha=this.dateForm.controls.fecha.value?.toJSON(),this.regForm=this.fb.group(e),this.list(1)}list(e){this.page=e,this.params.page=this.page,this.generalService.paramList$(`${q}/registry/list`,this.params).subscribe(o=>{this.registries=o.results,this.totalRegistries=o.total})}openRegForm(e,o){this.regForm.reset(),this.registry=o,this.regForm.patchValue(o),this.modalRef=this.dialogService.open(e,{dialogClass:"dialog-limited-height",context:{},closeOnBackdropClick:!0,closeOnEsc:!0})}save(){this.loading=!0,this.generalService.updateUrl$(`${q}/registry/${this.registry._id}/update`,this.regForm.value).subscribe(e=>{this.toastr.success("Registro actualizado correctamente!","\xa1\xc9xito!"),this.loading=!1,this.modalRef.close(),this.list(1)})}filtrarByDate(e){e?this.params.fecha=e.toJSON():delete this.params.fecha,this.list(1)}filter(){delete this.params.plaque,delete this.params.document;const e=this.forma.value;this.params={...this.params,[e.field]:e.query},this.list(1)}destroy(e){this.loading=!0,this.generalService.deleteUrl$(`${q}/registry/${e._id}/delete`).subscribe(o=>{this.toastr.success(`Registro del vehiculo ${e.truck.plaque} eliminado correctamente!`,"\xa1\xc9xito!"),this.list(1),this.loading=!1})}confirmDestroy(e){const o=this;this.common.showConfirm("CUIDADO!",`Est\xe1s tratando de eliminar el registro del veh\xedculo "${e.truck.plaque}", podr\xedas perder informaci\xf3n relacionada, si est\xe1s seguro continue por favor.`,function(s){s.isConfirmed&&o.destroy(e)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(c.qu),t.Y36(r.Gln),t.Y36(Z.v),t.Y36(r.quB),t.Y36(g.m),t.Y36(d.uU),t.Y36(h.e))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-registries"]],decls:65,vars:14,consts:[[1,"border-0","shadow-sm"],[1,"row","align-items-center","g-0"],[1,"col-lg-2","align-self-center"],["title","REGISTROS","description","Administrar registros","status","primary","icon","shopping-bag-outline"],[1,"col-lg-10","text-end"],[1,"row","justify-content-md-center","float-end","g-2"],[1,"col-auto"],[3,"formGroup"],["nbInput","","placeholder","Escoga una fecha","fullWidth","","formControlName","fecha","shape","semi-round",3,"nbDatepicker"],["nbSuffix","","icon","calendar","status","primary","size","small","pack","eva"],["format","dd/MM/yyyy"],["date",""],["controlName","fecha"],[1,"col-auto",3,"formGroup"],["formControlName","field","shape","semi-round"],["value","document"],["value","plaque"],["formControlName","query","type","search","nbInput","","shape","semi-round","fullWidth","","placeholder","Ingrese datos"],["nbButton","","fullWidth","","shape","semi-round","status","primary",3,"click"],["icon","eye-outline"],[2,"overflow-x","auto"],[1,"table-responsive"],[1,"table","align-middle"],[2,"width","150px"],[2,"width","60px"],[4,"ngFor","ngForOf"],[1,"text-center"],["previousLabel","","nextLabel","","id","registries",3,"directionLinks","pageChange"],[1,"text-start"],["dialog",""],[1,"text-muted"],["nbButton","","shape","semi-round","nbPopoverTrigger","focus","ghost","",3,"nbPopover",4,"ngIf"],[1,"d-flex","gap-2"],["nbTooltip","Editar","nbTooltipStatus","info","nbButton","","status","info","size","small","outline","",3,"click"],["icon","edit-outline"],["nbTooltip","Eliminar","nbTooltipStatus","danger","nbButton","","status","danger","size","small","outline","",3,"click"],["icon","trash-2-outline"],["nbButton","","shape","semi-round","nbPopoverTrigger","focus","ghost","",3,"nbPopover"],["icon","message-square-outline"],["appWindow","","widthSize","sm"],[1,"d-flex","align-items-center","justify-content-between"],["title","Actualizar detalles de registro","status","primary","icon","car-outline"],["nbButton","","ghost","","status","basic","shape","semi-round",3,"click"],["icon","close-outline"],[1,"row","g-3",3,"formGroup"],[1,"col-md-12"],[1,"text-right"],[1,"label"],["formControlName","state","placeholder","Seleccione sede","shape","semi-round","fullWidth",""],[3,"value",4,"ngFor","ngForOf"],["nbInput","","formControlName","observation","rows","6","fullWidth","","placeholder","Ingrese observaci\xf3n o nota"],["controlName","observation"],[1,"d-flex","justify-content-end","flex-wrap","gap-2"],["nbButton","","status","primary","shape","semi-round",3,"disabled","click"],["icon","save"],["nbButton","","status","danger","shape","semi-round",3,"click"],[3,"value"]],template:function(e,o){if(1&e&&(t.TgZ(0,"nb-card",0)(1,"nb-card-header")(2,"div",1)(3,"div",2),t._UZ(4,"app-header-info",3),t.qZA(),t.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"form",7)(9,"nb-form-field"),t._UZ(10,"input",8)(11,"nb-icon",9)(12,"nb-datepicker",10,11),t.qZA(),t._UZ(14,"app-error-message",12),t.qZA()(),t.TgZ(15,"div",13)(16,"nb-select",14)(17,"nb-option",15),t._uU(18,"C\xe9dula"),t.qZA(),t.TgZ(19,"nb-option",16),t._uU(20,"Placa"),t.qZA()()(),t.TgZ(21,"div",13),t._UZ(22,"input",17),t.qZA(),t.TgZ(23,"div",6)(24,"button",18),t.NdJ("click",function(){return o.filter()}),t._UZ(25,"nb-icon",19),t._uU(26," VISUALIZAR "),t.qZA()()()()()(),t.TgZ(27,"nb-card-body")(28,"div",20)(29,"div",21)(30,"table",22)(31,"thead")(32,"tr")(33,"th"),t._uU(34,"#"),t.qZA(),t.TgZ(35,"th"),t._uU(36,"Hola llegada"),t.qZA(),t.TgZ(37,"th"),t._uU(38,"Veh\xedculo"),t.qZA(),t.TgZ(39,"th"),t._uU(40,"Tipo"),t.qZA(),t.TgZ(41,"th"),t._uU(42,"Conductor"),t.qZA(),t.TgZ(43,"th"),t._uU(44,"Bahia descarga"),t.qZA(),t.TgZ(45,"th"),t._uU(46,"Bahia carga"),t.qZA(),t.TgZ(47,"th",23),t._uU(48,"Estado"),t.qZA(),t.TgZ(49,"th"),t._uU(50,"Fecha"),t.qZA(),t.TgZ(51,"th",24),t._uU(52,"Nota"),t.qZA(),t.TgZ(53,"th"),t._uU(54,"Acci\xf3n"),t.qZA()()(),t.TgZ(55,"tbody"),t.YNc(56,O,38,19,"tr",25),t.ALo(57,"paginate"),t.qZA()()()()(),t.TgZ(58,"nb-card-footer")(59,"div",26)(60,"pagination-controls",27),t.NdJ("pageChange",function(s){return o.list(s)}),t.qZA()(),t.TgZ(61,"small",28),t._uU(62),t.qZA()()(),t.YNc(63,B,31,6,"ng-template",null,29,t.W1O)),2&e){const n=t.MAs(13);t.xp6(8),t.Q6J("formGroup",o.dateForm),t.xp6(2),t.Q6J("nbDatepicker",n),t.xp6(5),t.Q6J("formGroup",o.forma),t.xp6(6),t.Q6J("formGroup",o.forma),t.xp6(35),t.Q6J("ngForOf",t.xi3(57,7,o.registries,t.kEZ(10,w,o.perPage.value,o.page,o.totalRegistries))),t.xp6(4),t.Q6J("directionLinks",!0),t.xp6(2),t.hij("",o.totalRegistries," Registros")}},dependencies:[d.sg,d.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,r.Asz,r.yKW,r.XWE,r.ndF,r.DPz,r.fMN,r.h8i,r.rs,r.q51,r.jNv,r.ydg,r.jBG,r.yyc,r.$kf,r.B4C,_.w,T.K,v.LS,C.H,d.uU,v._s]}),i})();function Y(i,a){if(1&i&&(t.TgZ(0,"nb-option",17),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.code),t.xp6(1),t.lnq("",e.code," - ",e.name," - ",e.region," ")}}const{control:F,account:E}=m.b;let G=(()=>{class i{constructor(e,o,n,s,l){this.dialogRef=e,this.fb=o,this.generalService=n,this.authService=s,this.toastr=l,this.campus=[],this.title="Nuevo bah\xeda",this.form=this.fb.group({_id:[""],name:["",[c.kI.required,c.kI.maxLength(30)]],campus:["",c.kI.required],isActive:[!0]})}ngOnInit(){this.data&&(this.title="Editar bah\xeda",this.form.patchValue(this.data)),this.getCampus()}getCampus(){this.generalService.filtersList$(`${E}/campus`).subscribe(e=>{this.campus=e,this.form.get("campus")?.patchValue(this.authService.user.campus)})}closeModal(){this.dialogRef.close()}submit(){const{_id:e,...o}=this.form.value;e?this.generalService.updateUrl$(`${F}/bay/${e}/update`,o).subscribe(n=>{this.toastr.success("Bahia fue actualizado correctamente!","\xa1\xc9xito!"),this.dialogRef.close({load:!0})}):this.generalService.addData$(`${F}/bay/create`,o).subscribe(n=>{this.toastr.success("Bahia fue creado correctamente!","\xa1\xc9xito!"),this.dialogRef.close({load:!0})})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(r.X4l),t.Y36(c.qu),t.Y36(g.m),t.Y36(h.e),t.Y36(r.quB))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-bahia-form"]],inputs:{data:"data"},decls:31,vars:4,consts:[["appWindow","","widthSize","sm",1,"scrollModal"],[1,"d-flex","align-items-center","justify-content-between"],["status","primary","icon","clipboard-outline",3,"title"],["nbButton","","ghost","","status","basic",3,"click"],["icon","close-outline"],[1,"row","g-3",3,"formGroup"],[1,"col-md-12"],[1,"label"],["formControlName","name","type","text","nbInput","","shape","semi-round","fullWidth","","placeholder","Ingrese nombre"],["controlName","name"],["formControlName","campus","placeholder","Seleccione sede","shape","semi-round","fullWidth",""],[3,"value",4,"ngFor","ngForOf"],["status","basic","formControlName","isActive"],[1,"text-end"],["nbButton","","shape","semi-round","status","primary",3,"disabled","click"],["icon","save-outline"],["nbButton","","shape","semi-round","status","danger",1,"ms-2",3,"click"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"nb-card",0)(1,"nb-card-header")(2,"div",1),t._UZ(3,"app-header-info",2),t.TgZ(4,"button",3),t.NdJ("click",function(){return o.closeModal()}),t._UZ(5,"nb-icon",4),t.qZA()()(),t.TgZ(6,"nb-card-body")(7,"form",5)(8,"div",6)(9,"label",7),t._uU(10,"Nombre "),t.TgZ(11,"small"),t._uU(12," *"),t.qZA()(),t._UZ(13,"input",8)(14,"app-error-message",9),t.qZA(),t.TgZ(15,"div",6)(16,"label",7),t._uU(17,"CD "),t.TgZ(18,"small"),t._uU(19," *"),t.qZA()(),t.TgZ(20,"nb-select",10),t.YNc(21,Y,2,4,"nb-option",11),t.qZA()(),t.TgZ(22,"div",6)(23,"nb-checkbox",12),t._uU(24,"Activo"),t.qZA()()()(),t.TgZ(25,"nb-card-footer",13)(26,"button",14),t.NdJ("click",function(){return o.submit()}),t._UZ(27,"nb-icon",15),t._uU(28," Guardar "),t.qZA(),t.TgZ(29,"button",16),t.NdJ("click",function(){return o.closeModal()}),t._uU(30," Cancelar "),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("title",o.title),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(14),t.Q6J("ngForOf",o.campus),t.xp6(5),t.Q6J("disabled",o.form.invalid))},dependencies:[d.sg,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,r.Asz,r.yKW,r.XWE,r.ndF,r.DPz,r.fMN,r.h8i,r.rs,r.q51,r.NTf,_.w,T.K,C.H]}),i})();function R(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"th"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"th")(6,"nb-checkbox",12),t.NdJ("ngModelChange",function(n){const l=t.CHM(e).$implicit;return t.KtG(l.isActive=n)})("ngModelChange",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.update(s))}),t.qZA()(),t.TgZ(7,"td")(8,"button",13),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.openModal(s))}),t._UZ(9,"nb-icon",14),t.qZA(),t.TgZ(10,"button",15),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.confirmDelete(s))}),t._UZ(11,"nb-icon",16),t.qZA()()()}if(2&i){const e=a.$implicit,o=a.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Q6J("ngModel",e.isActive)}}const{control:x}=m.b;let z=(()=>{class i{constructor(e,o,n,s,l){this.dialogService=e,this.generalService=o,this.authService=n,this.toastr=s,this.common=l,this.loading=!1,this.bays=[]}ngOnInit(){this.all()}all(){this.generalService.paramList$(`${x}/bay/list`,{campus:this.authService.user.campus}).subscribe(e=>{this.bays=e})}openModal(e){this.dialogService.open(G,{dialogClass:"dialog-limited-height",context:{data:e},closeOnBackdropClick:!0,closeOnEsc:!0}).onClose.subscribe(n=>{n&&this.all()})}update(e){this.generalService.updateUrl$(`${x}/bay/${e._id}/update`,e).subscribe(o=>{this.toastr.success(`Bahia ${e.name} actualizado correctamente!`,"\xa1\xc9xito!"),this.all()})}deleteBahia(e){this.loading=!0,this.generalService.delete$(`${x}/bay/${e._id}/delete`).subscribe(()=>{this.toastr.success(`Bahia ${e.name} eliminado correctamente!`,"\xa1\xc9xito!"),this.all(),this.loading=!1})}confirmDelete(e){const o=this;this.common.showConfirm("\xbfEst\xe1s seguro?",`Al eliminar ${e.name}, podr\xedas perder informaci\xf3n que est\xe9 relacionada, si est\xe1s seguro continue por favor.`,function(s){s.isConfirmed&&o.deleteBahia(e)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(r.Gln),t.Y36(g.m),t.Y36(h.e),t.Y36(r.quB),t.Y36(Z.v))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-bahias"]],decls:26,vars:1,consts:[[1,"border-0","shadow-sm"],[1,"row","align-items-center","g-0"],[1,"col-lg-3","align-self-center"],["title","BAHIAS","description","Administrar bahias","status","primary","icon","clipboard-outline"],[1,"col-lg-9","text-end"],[1,"row","justify-content-md-center","float-end","g-1"],[1,"col-auto"],["nbButton","","fullWidth","","shape","semi-round","status","primary",3,"click"],["icon","plus-outline"],[1,"table-responsive"],[1,"table","align-middle"],[4,"ngFor","ngForOf"],["status","basic",3,"ngModel","ngModelChange"],["nbTooltip","Editar","nbTooltipStatus","primary","nbButton","","status","primary","size","small","outline","",3,"click"],["icon","edit-outline"],["nbTooltip","Eliminar","nbTooltipStatus","danger","nbButton","","status","danger","size","small","outline","",1,"ms-2",3,"click"],["icon","trash-2-outline"]],template:function(e,o){1&e&&(t.TgZ(0,"nb-card",0)(1,"nb-card-header")(2,"div",1)(3,"div",2),t._UZ(4,"app-header-info",3),t.qZA(),t.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"button",7),t.NdJ("click",function(){return o.openModal()}),t._UZ(9,"nb-icon",8),t._uU(10," Nuevo "),t.qZA()()()()()(),t.TgZ(11,"nb-card-body")(12,"div",9)(13,"table",10)(14,"thead")(15,"tr")(16,"th"),t._uU(17,"#"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Nombre"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Activo"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Opciones"),t.qZA()()(),t.TgZ(24,"tbody"),t.YNc(25,R,12,3,"tr",11),t.qZA()()()()()),2&e&&(t.xp6(25),t.Q6J("ngForOf",o.bays))},dependencies:[d.sg,c.JJ,r.Asz,r.yKW,r.ndF,r.DPz,r.fMN,r.NTf,r.jNv,_.w,c.On]}),i})();function D(i,a){if(1&i&&(t.TgZ(0,"nb-option",17),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.code),t.xp6(1),t.lnq("",e.code," - ",e.name," - ",e.region," ")}}const{account:Q,control:$}=m.b;let W=(()=>{class i{constructor(e,o,n,s,l){this.dialogRef=e,this.fb=o,this.generalService=n,this.authService=s,this.toastr=l,this.campus=[],this.title="Nuevo montacarga",this.form=this.fb.group({_id:[""],name:["",[c.kI.required,c.kI.maxLength(30)]],campus:["",c.kI.required],isFree:[!1]})}ngOnInit(){this.getCampus(),this.data&&(this.title="Editar montacarga",this.form.patchValue(this.data))}getCampus(){this.generalService.filtersList$(`${Q}/campus`).subscribe(e=>{this.campus=e,this.form.get("campus")?.patchValue(this.authService.user.campus)})}closeModal(){this.dialogRef.close()}submit(){const{_id:e,...o}=this.form.value;e?this.generalService.updateUrl$(`${$}/lift/${e}/update`,o).subscribe(n=>{this.toastr.success("Montacarga fue actualizado correctamente!","\xa1\xc9xito!"),this.dialogRef.close({load:!0})}):this.generalService.addData$(`${$}/lift/create`,o).subscribe(n=>{this.toastr.success("Montacarga fue creado correctamente!","\xa1\xc9xito!"),this.dialogRef.close({load:!0})})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(r.X4l),t.Y36(c.qu),t.Y36(g.m),t.Y36(h.e),t.Y36(r.quB))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-lifttruck-form"]],inputs:{data:"data"},decls:31,vars:4,consts:[["appWindow","","widthSize","sm",1,"scrollModal"],[1,"d-flex","align-items-center","justify-content-between"],["status","primary","icon","clipboard-outline",3,"title"],["nbButton","","ghost","","status","basic",3,"click"],["icon","close-outline"],[1,"row","g-3",3,"formGroup"],[1,"col-md-12"],[1,"label"],["formControlName","name","type","text","nbInput","","shape","semi-round","fullWidth","","placeholder","Ingrese nombre"],["controlName","name"],["formControlName","campus","placeholder","Seleccione sede","shape","semi-round","fullWidth",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","isFree"],[1,"text-end"],["nbButton","","shape","semi-round","status","primary",3,"disabled","click"],["icon","save-outline"],["nbButton","","shape","semi-round","status","danger",1,"ms-2",3,"click"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"nb-card",0)(1,"nb-card-header")(2,"div",1),t._UZ(3,"app-header-info",2),t.TgZ(4,"button",3),t.NdJ("click",function(){return o.closeModal()}),t._UZ(5,"nb-icon",4),t.qZA()()(),t.TgZ(6,"nb-card-body")(7,"form",5)(8,"div",6)(9,"label",7),t._uU(10,"Nombre "),t.TgZ(11,"small"),t._uU(12," *"),t.qZA()(),t._UZ(13,"input",8)(14,"app-error-message",9),t.qZA(),t.TgZ(15,"div",6)(16,"label",7),t._uU(17,"CD "),t.TgZ(18,"small"),t._uU(19," *"),t.qZA()(),t.TgZ(20,"nb-select",10),t.YNc(21,D,2,4,"nb-option",11),t.qZA()(),t.TgZ(22,"div",6)(23,"nb-checkbox",12),t._uU(24,"Libre"),t.qZA()()()(),t.TgZ(25,"nb-card-footer",13)(26,"button",14),t.NdJ("click",function(){return o.submit()}),t._UZ(27,"nb-icon",15),t._uU(28," Guardar "),t.qZA(),t.TgZ(29,"button",16),t.NdJ("click",function(){return o.closeModal()}),t._uU(30," Cancelar "),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("title",o.title),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(14),t.Q6J("ngForOf",o.campus),t.xp6(5),t.Q6J("disabled",o.form.invalid))},dependencies:[d.sg,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,r.Asz,r.yKW,r.XWE,r.ndF,r.DPz,r.fMN,r.h8i,r.rs,r.q51,r.NTf,_.w,T.K,C.H]}),i})();function H(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"nb-checkbox",9),t.NdJ("ngModelChange",function(n){const l=t.CHM(e).$implicit;return t.KtG(l.isChecked=n)})("ngModelChange",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.changeOperator(s))}),t._uU(2),t.qZA()()}if(2&i){const e=a.$implicit;t.xp6(1),t.Q6J("disabled",e.disable)("ngModel",e.isChecked),t.xp6(1),t.AsE(" ",e.firstName," ",e.lastName," ")}}const{account:K,control:J}=m.b;let j=(()=>{class i{constructor(e,o,n){this.dialogRef=e,this.generalService=o,this.authService=n,this.operators=[]}ngOnInit(){console.log(this.lift),this.getOperators()}getOperators(){const e={page:1,pageSize:50,isOperator:!0,isActive:!0,campus:this.authService.user.campus},o=this.lifts.filter(s=>s!==this.lift),n=[].concat.apply([],o.map(s=>s.operators));this.generalService.paramList$(`${K}/users`,e).subscribe(s=>{this.operators=s.results.map(l=>{const p=this.lift.operators.find(y=>y.operator.uid===l.uid),b=!!n.find(y=>y.operator.uid===l.uid);return{...l,isChecked:!!p,liftOperator:p,disable:b}})})}changeOperator(e){e.isChecked?this.generalService.addData$(`${J}/lift-operator/create`,{lift:this.lift?._id,operator:e.uid}).subscribe(n=>{console.log(n)}):this.generalService.deleteUrl$(`${J}/lift-operator/${e.liftOperator._id}/delete`).subscribe(o=>{console.log("holaaa",o)})}closeModal(){this.dialogRef.close()}submit(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(r.X4l),t.Y36(g.m),t.Y36(h.e))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-lift-modal"]],inputs:{lift:"lift",lifts:"lifts"},decls:14,vars:2,consts:[["appWindow","","widthSize","sm",1,"scrollModal"],[1,"d-flex","align-items-center","justify-content-between"],["description","Asignar operadores","status","primary","icon","car",3,"title"],["nbButton","","ghost","","status","basic",3,"click"],["icon","close-outline"],[4,"ngFor","ngForOf"],[1,"text-end"],["nbButton","","shape","semi-round","status","primary",1,"ms-2",3,"click"],["icon","checkmark-outline"],["status","basic",3,"disabled","ngModel","ngModelChange"]],template:function(e,o){1&e&&(t.TgZ(0,"nb-card",0)(1,"nb-card-header")(2,"div",1),t._UZ(3,"app-header-info",2),t.TgZ(4,"button",3),t.NdJ("click",function(){return o.closeModal()}),t._UZ(5,"nb-icon",4),t.qZA()()(),t.TgZ(6,"nb-card-body")(7,"h6"),t._uU(8,"Operadores asignados"),t.qZA(),t.YNc(9,H,3,4,"div",5),t.qZA(),t.TgZ(10,"nb-card-footer",6)(11,"button",7),t.NdJ("click",function(){return o.closeModal()}),t._UZ(12,"nb-icon",8),t._uU(13," Hecho "),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("title",o.lift.name),t.xp6(6),t.Q6J("ngForOf",o.operators))},dependencies:[d.sg,c.JJ,r.Asz,r.yKW,r.XWE,r.ndF,r.DPz,r.fMN,r.NTf,_.w,T.K,c.On]}),i})();function P(i,a){if(1&i&&(t.TgZ(0,"li"),t._uU(1),t.TgZ(2,"small"),t._uU(3),t.qZA()()),2&i){const e=a.$implicit;t.xp6(1),t.AsE("",e.operator.firstName," ",e.operator.lastName," "),t.xp6(2),t.Oqu(e.operator.document)}}function X(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"th"),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"strong",12),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.showLift(s))}),t._uU(5),t.qZA()(),t.TgZ(6,"td")(7,"ol"),t.YNc(8,P,4,3,"li",11),t.qZA()(),t.TgZ(9,"td"),t._UZ(10,"nb-icon",13),t._uU(11),t.qZA(),t.TgZ(12,"th")(13,"nb-checkbox",14),t.NdJ("ngModelChange",function(n){const l=t.CHM(e).$implicit;return t.KtG(l.isActive=n)})("ngModelChange",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.update(s))}),t.qZA()(),t.TgZ(14,"td")(15,"button",15),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.showLift(s))}),t._UZ(16,"nb-icon",16),t.qZA(),t.TgZ(17,"button",17),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.openModal(s))}),t._UZ(18,"nb-icon",18),t.qZA(),t.TgZ(19,"button",19),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.confirmDelete(s))}),t._UZ(20,"nb-icon",20),t.qZA()()()}if(2&i){const e=a.$implicit,o=a.index;t.xp6(2),t.Oqu(o+1),t.xp6(3),t.Oqu(e.name),t.xp6(3),t.Q6J("ngForOf",e.operators),t.xp6(2),t.Q6J("icon",e.isFree?"checkmark-square-2-outline":"checkmark-square-2"),t.xp6(1),t.hij(" ",e.isFree?"SI":"NO"," "),t.xp6(2),t.Q6J("disabled",e.operators.length<1)("ngModel",e.isActive)}}const{control:U}=m.b;let V=(()=>{class i{constructor(e,o,n,s,l){this.dialogService=e,this.generalService=o,this.authService=n,this.toastr=s,this.common=l,this.loading=!1,this.lifts=[]}ngOnInit(){this.all()}all(){this.generalService.paramList$(`${U}/lift/list`,{campus:this.authService.user.campus}).subscribe(e=>this.lifts=e)}openModal(e){this.dialogService.open(W,{dialogClass:"dialog-limited-height",context:{data:e},closeOnBackdropClick:!0,closeOnEsc:!0}).onClose.subscribe(n=>{n&&this.all()})}showLift(e){this.dialogService.open(j,{dialogClass:"dialog-limited-height",context:{lift:e,lifts:this.lifts},closeOnBackdropClick:!0,closeOnEsc:!0}).onClose.subscribe(()=>this.all())}update(e){this.generalService.updateUrl$(`${U}/lift/${e._id}/update`,e).subscribe(o=>{this.toastr.success(`Montacarga ${e.name} actualizado correctamente!`,"\xa1\xc9xito!"),this.all()})}deleteLift(e){this.loading=!0,this.generalService.delete$(`${U}/lift/${e._id}/delete`).subscribe(()=>{this.toastr.success(`Montacarga ${e.name} eliminado correctamente!`,"\xa1\xc9xito!"),this.all(),this.loading=!1})}confirmDelete(e){const o=this;this.common.showConfirm("\xbfEst\xe1s seguro?",`Al eliminar ${e.name}, podr\xedas perder informaci\xf3n que est\xe9 relacionada, si est\xe1s seguro continue por favor.`,function(s){s.isConfirmed&&o.deleteLift(e)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(r.Gln),t.Y36(g.m),t.Y36(h.e),t.Y36(r.quB),t.Y36(Z.v))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-lifttruck"]],decls:30,vars:1,consts:[[1,"border-0","shadow-sm"],[1,"row","align-items-center","g-0"],[1,"col-lg-3","align-self-center"],["title","MONTACARGAS","description","Administrar montacargas","status","primary","icon","clipboard-outline"],[1,"col-lg-9","text-end"],[1,"row","justify-content-md-center","float-end","g-1"],[1,"col-auto"],["nbButton","","fullWidth","","shape","semi-round","status","primary",3,"click"],["icon","plus-outline"],[1,"table-responsive"],[1,"table","align-middle"],[4,"ngFor","ngForOf"],[1,"name",3,"click"],[3,"icon"],["status","basic",3,"disabled","ngModel","ngModelChange"],["nbTooltip","Ver detalle","nbTooltipStatus","info","nbButton","","status","info","size","small","outline","",3,"click"],["icon","settings-2-outline"],["nbTooltip","Editar","nbTooltipStatus","primary","nbButton","","status","primary","size","small","outline","",1,"ms-2",3,"click"],["icon","edit-outline"],["nbTooltip","Eliminar","nbTooltipStatus","danger","nbButton","","status","danger","size","small","outline","",1,"ms-2",3,"click"],["icon","trash-2-outline"]],template:function(e,o){1&e&&(t.TgZ(0,"nb-card",0)(1,"nb-card-header")(2,"div",1)(3,"div",2),t._UZ(4,"app-header-info",3),t.qZA(),t.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"button",7),t.NdJ("click",function(){return o.openModal()}),t._UZ(9,"nb-icon",8),t._uU(10," Nuevo "),t.qZA()()()()()(),t.TgZ(11,"nb-card-body")(12,"div",9)(13,"table",10)(14,"thead")(15,"tr")(16,"th"),t._uU(17,"#"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Nombre"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Operadores"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Libre"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Activo"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Opci\xf3n"),t.qZA()()(),t.TgZ(28,"tbody"),t.YNc(29,X,21,7,"tr",11),t.qZA()()()()()),2&e&&(t.xp6(29),t.Q6J("ngForOf",o.lifts))},dependencies:[d.sg,c.JJ,r.Asz,r.yKW,r.ndF,r.DPz,r.fMN,r.NTf,r.jNv,_.w,c.On]}),i})();var tt=u(529);const et=function(i){return["../camion",i]};function ot(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"th"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"small"),t._uU(7),t.qZA()(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td")(15,"button",19),t._UZ(16,"nb-icon",20),t.qZA(),t.TgZ(17,"button",21),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.confirmDelete(s))}),t._UZ(18,"nb-icon",22),t.qZA()()()}if(2&i){const e=a.$implicit,o=a.index,n=t.oxw();t.xp6(2),t.Oqu((n.page-1)*n.perPage.value+o+1),t.xp6(2),t.Oqu(e.plaque),t.xp6(3),t.Oqu(null==e.type?null:e.type.name),t.xp6(2),t.Oqu(e.origin),t.xp6(2),t.Oqu(e.ruc),t.xp6(2),t.Oqu(e.company),t.xp6(2),t.Q6J("routerLink",t.VKq(7,et,e._id))}}const it=function(i,a,e){return{id:"trucks",itemsPerPage:i,currentPage:a,totalItems:e}},{control:S}=m.b;let nt=(()=>{class i{constructor(e,o,n,s,l){this.generalService=e,this.fb=o,this.authService=n,this.toastr=s,this.common=l,this.loading=!1,this.trucks=[],this.perPage=this.fb.control("10"),this.page=1,this.field=this.fb.control("plaque"),this.query=this.fb.control("")}ngOnInit(){this.list(1)}list(e){this.page=e;let o=(new tt.LE).set("campus",this.authService.user.campus).set(this.field.value,this.query.value).set("per_page",this.perPage.value).set("page",e);this.generalService.paramList$(`${S}/truck/list`,o).subscribe(n=>{console.log(n),this.trucks=n.results,this.total=n.total})}deleteTruck(e){this.loading=!0,this.generalService.delete$(`${S}/truck/${e._id}/delete`).subscribe(()=>{this.toastr.success(`Cami\xf3n ${e.plaque} eliminado correctamente!`,"\xa1\xc9xito!"),this.list(1),this.loading=!1})}confirmDelete(e){const o=this;this.common.showConfirm("\xbfEst\xe1s seguro?",`Al eliminar ${e.plaque}, podr\xedas perder informaci\xf3n que est\xe9 relacionada, si est\xe1s seguro continue por favor.`,function(s){s.isConfirmed&&o.deleteTruck(e)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(g.m),t.Y36(c.qu),t.Y36(h.e),t.Y36(r.quB),t.Y36(Z.v))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-trucks"]],decls:44,vars:11,consts:[[1,"border-0","shadow-sm"],[1,"row","align-items-center","g-0"],[1,"col-lg-3","align-self-center"],["title","CAMIONES","description","Administrar camiones","status","primary","icon","car-outline"],[1,"col-lg-9","text-end"],[1,"row","justify-content-md-center","float-end","g-2"],[1,"col-auto"],["shape","semi-round",3,"formControl"],["value","plaque"],["type","search","nbInput","","shape","semi-round","fullWidth","","placeholder","Ingrese datos",3,"formControl"],["nbButton","","fullWidth","","shape","semi-round","status","info",3,"click"],["icon","eye-outline"],["nbButton","","fullWidth","","shape","semi-round","status","primary","routerLink","/pages/control/camion/create"],["icon","plus"],[1,"table-responsive"],[1,"table","align-middle"],[4,"ngFor","ngForOf"],[1,"text-center"],["previousLabel","","nextLabel","","id","trucks",1,"pagination",3,"directionLinks","pageChange"],["nbTooltip","Editar","nbTooltipStatus","primary","nbButton","","status","primary","size","small","outline","",3,"routerLink"],["icon","edit-outline"],["nbTooltip","Eliminar","nbTooltipStatus","danger","nbButton","","status","danger","size","small","outline","",1,"ms-2",3,"click"],["icon","trash-2-outline"]],template:function(e,o){1&e&&(t.TgZ(0,"nb-card",0)(1,"nb-card-header")(2,"div",1)(3,"div",2),t._UZ(4,"app-header-info",3),t.qZA(),t.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"nb-select",7)(9,"nb-option",8),t._uU(10,"Placa"),t.qZA()()(),t.TgZ(11,"div",6),t._UZ(12,"input",9),t.qZA(),t.TgZ(13,"div",6)(14,"button",10),t.NdJ("click",function(){return o.list(1)}),t._UZ(15,"nb-icon",11),t._uU(16," VISUALIZAR "),t.qZA()(),t.TgZ(17,"div",6)(18,"button",12),t._UZ(19,"nb-icon",13),t.qZA()()()()()(),t.TgZ(20,"nb-card-body")(21,"div",14)(22,"table",15)(23,"thead")(24,"tr")(25,"th"),t._uU(26,"#"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Placa"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Tipo"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"Procedencia"),t.qZA(),t.TgZ(33,"th"),t._uU(34,"RUC"),t.qZA(),t.TgZ(35,"th"),t._uU(36,"Empresa"),t.qZA(),t.TgZ(37,"th"),t._uU(38,"Acci\xf3n"),t.qZA()()(),t.TgZ(39,"tbody"),t.YNc(40,ot,19,9,"tr",16),t.ALo(41,"paginate"),t.qZA()()()(),t.TgZ(42,"nb-card-footer",17)(43,"pagination-controls",18),t.NdJ("pageChange",function(s){return o.list(s)}),t.qZA()()()),2&e&&(t.xp6(8),t.Q6J("formControl",o.field),t.xp6(4),t.Q6J("formControl",o.query),t.xp6(28),t.Q6J("ngForOf",t.xi3(41,4,o.trucks,t.kEZ(7,it,o.perPage.value,o.page,o.total))),t.xp6(3),t.Q6J("directionLinks",!0))},dependencies:[d.sg,f.rH,c.Fj,c.JJ,c.oH,r.Asz,r.yKW,r.XWE,r.ndF,r.DPz,r.fMN,r.h8i,r.rs,r.q51,r.jNv,_.w,v.LS,v._s]}),i})();function rt(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"th"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"th"),t._uU(8),t.TgZ(9,"small"),t._uU(10,"Minutos"),t.qZA()(),t.TgZ(11,"th"),t._uU(12),t.TgZ(13,"small"),t._uU(14,"Minutos"),t.qZA()(),t.TgZ(15,"td")(16,"div",14)(17,"button",15),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw(),p=t.MAs(33);return t.KtG(l.openModal(p,s))}),t._UZ(18,"nb-icon",16),t.qZA(),t.TgZ(19,"button",17),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.confirmDelete(s))}),t._UZ(20,"nb-icon",18),t.qZA()()()()}if(2&i){const e=a.$implicit,o=a.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.hij("",e.maxTimeUnload," "),t.xp6(4),t.hij("",e.maxTimeLoad," ")}}function st(i,a){if(1&i&&(t.TgZ(0,"nb-option",43),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.code),t.xp6(1),t.lnq("",e.code," - ",e.name," - ",e.region," ")}}function at(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"nb-card",19)(1,"nb-card-header")(2,"div",20),t._UZ(3,"app-header-info",21),t.TgZ(4,"button",22),t.NdJ("click",function(){const s=t.CHM(e).dialogRef;return t.KtG(s.close())}),t._UZ(5,"nb-icon",23),t.qZA()()(),t.TgZ(6,"nb-card-body")(7,"div",24)(8,"div",25)(9,"label",26),t._uU(10,"Nombre*"),t.qZA(),t._UZ(11,"input",27)(12,"app-error-message",28),t.qZA(),t.TgZ(13,"div",25)(14,"label",26),t._uU(15,"Descripci\xf3n"),t.qZA(),t._UZ(16,"input",29)(17,"app-error-message",30),t.qZA(),t.TgZ(18,"div",25)(19,"div",31)(20,"div",32)(21,"label",26),t._uU(22,"Tiempo m\xe1ximo descarga"),t.qZA(),t._UZ(23,"input",33)(24,"app-error-message",34),t.qZA(),t.TgZ(25,"div",32)(26,"label",26),t._uU(27,"Tiempo m\xe1ximo carga"),t.qZA(),t._UZ(28,"input",35)(29,"app-error-message",36),t.qZA()()(),t.TgZ(30,"div",25)(31,"label",26),t._uU(32,"CD "),t.TgZ(33,"small"),t._uU(34," *"),t.qZA()(),t.TgZ(35,"nb-select",37),t.YNc(36,st,2,4,"nb-option",38),t.qZA()()()(),t.TgZ(37,"nb-card-footer")(38,"div",39)(39,"button",40),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.insertTruckType())}),t._UZ(40,"nb-icon",41),t._uU(41," Guardar "),t.qZA(),t.TgZ(42,"button",42),t.NdJ("click",function(){const s=t.CHM(e).dialogRef;return t.KtG(s.close())}),t._uU(43,"Cancelar"),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(3),t.Q6J("title",e.title),t.xp6(4),t.Q6J("formGroup",e.formHeader),t.xp6(29),t.Q6J("ngForOf",e.campus),t.xp6(3),t.Q6J("disabled",!e.formHeader.valid)}}const{control:A,account:ct}=m.b;let lt=(()=>{class i{constructor(e,o,n,s,l,p){this.dialogService=e,this.fb=o,this.generalService=n,this.common=s,this.toastr=l,this.authService=p,this.loading=!1,this.campus=[],this.truckTypes=[],this.title=""}ngOnInit(){this.reactiveFields()}reactiveFields(){const e={_id:[""],name:["",[c.kI.required,c.kI.maxLength(30)]],description:["",[c.kI.maxLength(40)]],maxTimeUnload:[0,[c.kI.required]],maxTimeLoad:[0,[c.kI.required]],campus:["",[c.kI.required]]};this.formHeader=this.fb.group(e),this.getCampus(),this.getTruckTypes()}getCampus(){this.generalService.filtersList$(`${ct}/campus`).subscribe(e=>this.campus=e)}getTruckTypes(){this.loading=!0,this.generalService.paramList$(`${A}/truck-type/list`,{campus:this.authService.user.campus}).subscribe(o=>{this.truckTypes=o||[],console.log(this.truckTypes),this.loading=!1})}openModal(e,o){this.title="Nuevo Tipo de cami\xf3n",this.formHeader.reset();const{campus:n}=this.authService.user;this.formHeader.get("campus")?.patchValue(n),o&&(this.title="Editar Tipo de cami\xf3n",this.formHeader.patchValue(o)),this.modalRef=this.dialogService.open(e,{dialogClass:"dialog-limited-height",context:{},closeOnBackdropClick:!0,closeOnEsc:!0})}insertTruckType(){this.loading=!0;const{value:e}=this.formHeader;e._id?this.generalService.updateUrl$(`${A}/truck-type/${e._id}/update`,e).subscribe(()=>{this.toastr.success("Tipo Cami\xf3n fue actualizado correctamente!","\xa1\xc9xito!"),this.finalAction()}):(delete e._id,this.generalService.addData$(`${A}/truck-type/create`,e).subscribe(()=>{this.toastr.success("Tipo Cami\xf3n fue creado correctamente!","\xa1\xc9xito!"),this.finalAction()}))}deleteTruckType(e){this.loading=!0,this.generalService.delete$(`${A}/truck-type/${e._id}/delete`).subscribe(()=>{this.toastr.success(`BK-Placa ${e.name} eliminado correctamente!`,"\xa1\xc9xito!"),this.getTruckTypes(),this.loading=!1})}confirmDelete(e){const o=this;this.common.showConfirm("\xbfEst\xe1s seguro?",`Al eliminar ${e.name}, podr\xedas perder informaci\xf3n que est\xe9 relacionada, si est\xe1s seguro continue por favor.`,function(s){s.isConfirmed&&o.deleteTruckType(e)})}finalAction(){this.loading=!1,this.modalRef.close(),this.getTruckTypes()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(r.Gln),t.Y36(c.qu),t.Y36(g.m),t.Y36(Z.v),t.Y36(r.quB),t.Y36(h.e))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-truckstypes"]],decls:34,vars:1,consts:[[1,"border-0","shadow-sm"],[1,"row","align-items-center","g-0"],[1,"col-lg-3","align-self-center"],["title","TIPOS DE CAMIONES","description","Administrar tipos de camiones","status","primary","icon","car-outline"],[1,"col-lg-9","text-end"],[1,"row","justify-content-md-center","float-end","g-2"],[1,"col-auto"],["type","search","nbInput","","shape","semi-round","fullWidth","","placeholder","Ingrese datos"],["nbButton","","fullWidth","","shape","semi-round","status","primary",3,"click"],["icon","plus-outline"],[1,"table-responsive"],[1,"table","align-middle"],[4,"ngFor","ngForOf"],["dialog",""],[1,"d-flex","gap-2"],["nbTooltip","Editar","nbTooltipStatus","info","nbButton","","status","info","size","small","outline","",3,"click"],["icon","edit-outline"],["nbTooltip","Eliminar","nbTooltipStatus","danger","nbButton","","status","danger","size","small","outline","",3,"click"],["icon","trash-2-outline"],["appWindow","","widthSize","sm"],[1,"d-flex","align-items-center","justify-content-between"],["status","primary","icon","car-outline",3,"title"],["nbButton","","ghost","","status","basic","shape","semi-round",3,"click"],["icon","close-outline"],[1,"row","g-3",3,"formGroup"],[1,"col-md-12"],[1,"label"],["nbInput","","type","text","placeholder","Ingrese nombre","formControlName","name","shape","semi-round","fullWidth",""],["controlName","name"],["nbInput","","type","text","placeholder","Ingrese una descripci\xf3n","formControlName","description","shape","semi-round","fullWidth",""],["controlName","description"],[1,"row"],[1,"col-md-6"],["nbInput","","type","number","placeholder","Ingrese minutos","formControlName","maxTimeUnload","shape","semi-round","fullWidth","","min","0"],["controlName","maxTimeUnload"],["nbInput","","type","number","placeholder","Ingrese minutos","formControlName","maxTimeLoad","shape","semi-round","fullWidth","","min","0"],["controlName","maxTimeLoad"],["formControlName","campus","placeholder","Seleccione sede","shape","semi-round","fullWidth",""],[3,"value",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end","flex-wrap","gap-2"],["nbButton","","status","primary","shape","semi-round",3,"disabled","click"],["icon","save"],["nbButton","","status","danger","shape","semi-round",3,"click"],[3,"value"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"nb-card",0)(1,"nb-card-header")(2,"div",1)(3,"div",2),t._UZ(4,"app-header-info",3),t.qZA(),t.TgZ(5,"div",4)(6,"div",5)(7,"div",6),t._UZ(8,"input",7),t.qZA(),t.TgZ(9,"div",6)(10,"button",8),t.NdJ("click",function(){t.CHM(n);const l=t.MAs(33);return t.KtG(o.openModal(l))}),t._UZ(11,"nb-icon",9),t._uU(12," Nuevo "),t.qZA()()()()()(),t.TgZ(13,"nb-card-body")(14,"div",10)(15,"table",11)(16,"thead")(17,"tr")(18,"th"),t._uU(19,"#"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Nombre"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Descripci\xf3n"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Max. Tiempo descarga"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Max. Tiempo carga"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"Opciones"),t.qZA()()(),t.TgZ(30,"tbody"),t.YNc(31,rt,21,5,"tr",12),t.qZA()()()()(),t.YNc(32,at,44,4,"ng-template",null,13,t.W1O)}2&e&&(t.xp6(31),t.Q6J("ngForOf",o.truckTypes))},dependencies:[d.sg,c.Fj,c.wV,c.JJ,c.JL,c.qQ,c.sg,c.u,r.Asz,r.yKW,r.XWE,r.ndF,r.DPz,r.fMN,r.h8i,r.rs,r.q51,r.jNv,_.w,T.K,C.H]}),i})();function ut(i,a){if(1&i&&(t.TgZ(0,"nb-option",25),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.code),t.xp6(1),t.lnq("",e.code," - ",e.name," - ",e.region," ")}}function dt(i,a){if(1&i&&(t.TgZ(0,"nb-option",25),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}const{control:k,account:pt}=m.b,mt=[{path:"registros",component:I},{path:"bahias",component:z},{path:"montacargas",component:V},{path:"camiones",component:nt},{path:"camion/:id",component:(()=>{class i{constructor(e,o,n,s,l,p){this.authService=e,this.fb=o,this.generalService=n,this.route=s,this.router=l,this.toastr=p,this.ttypes=[],this.campus=[],this.title="Nuevo cami\xf3n",this.form=this.fb.group({_id:[""],plaque:["",[c.kI.required,c.kI.maxLength(10)]],type:["",c.kI.required],campus:["",c.kI.required],origin:[""],ruc:[""],company:[""]}),this.route.params.subscribe(({id:b})=>{"create"!=b&&this.get(b)})}ngOnInit(){this.getTtypes(),this.getCampus()}get(e){this.title="Editar cami\xf3n",this.generalService.filtersList$(`${k}/truck/${e}/retrieve`).subscribe(o=>this.form.patchValue(o))}getTtypes(){this.generalService.filtersList$(`${k}/truck-type/list`).subscribe(e=>this.ttypes=e)}getCampus(){this.generalService.filtersList$(`${pt}/campus`).subscribe(e=>{this.campus=e;const{campus:o}=this.authService.user;this.form.get("campus")?.patchValue(o)})}submit(){const{_id:e,...o}=this.form.value;e?this.generalService.updateUrl$(`${k}/truck/${e}/update`,o).subscribe(n=>{this.toastr.success("Cami\xf3n fue actualizado correctamente!","\xa1\xc9xito!"),this.router.navigateByUrl("/pages/control/camiones")}):this.generalService.addData$(`${k}/truck/create`,o).subscribe(n=>{this.toastr.success("Cami\xf3n fue creado correctamente!","\xa1\xc9xito!"),this.router.navigateByUrl("/pages/control/camiones")})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(h.e),t.Y36(c.qu),t.Y36(g.m),t.Y36(f.gz),t.Y36(f.F0),t.Y36(r.quB))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-truck-form"]],decls:50,vars:5,consts:[[1,"border-0","shadow-sm"],[1,"row","align-items-center","g-0"],[1,"col-lg-3","align-self-center"],["status","primary","icon","car-outline",3,"title"],[1,"col-lg-9","text-end"],["nbButton","","shape","semi-round","ghost","","routerLink","/pages/control/camiones"],["icon","arrow-back-outline","status","primary"],[1,"row","g-3",3,"formGroup"],[1,"col-md-4"],[1,"label"],["formControlName","plaque","type","text","nbInput","","shape","semi-round","fullWidth","","placeholder","Ingrese placa"],["controlName","plaque"],["formControlName","campus","placeholder","Seleccione sede","shape","semi-round","fullWidth",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","type","placeholder","Seleccione sede","shape","semi-round","fullWidth",""],["controlName","type"],[1,"col-md-6"],["formControlName","origin","type","text","nbInput","","shape","semi-round","fullWidth","","placeholder","Ingrese procediencia"],["formControlName","ruc","type","text","nbInput","","shape","semi-round","fullWidth","","placeholder","Ingrese ruc"],[1,"col-md-12"],["formControlName","company","type","text","nbInput","","shape","semi-round","fullWidth","","placeholder","Ingrese raz\xf3n social"],[1,"text-end"],["nbButton","","shape","semi-round","status","primary",3,"disabled","click"],["icon","save-outline"],["nbButton","","shape","semi-round","status","danger","routerLink","/pages/control/camiones",1,"ms-2"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"nb-card",0)(1,"nb-card-header")(2,"div",1)(3,"div",2),t._UZ(4,"app-header-info",3),t.qZA(),t.TgZ(5,"div",4)(6,"button",5),t._UZ(7,"nb-icon",6),t.qZA()()()(),t.TgZ(8,"nb-card-body")(9,"form",7)(10,"div",8)(11,"label",9),t._uU(12,"Placa "),t.TgZ(13,"small"),t._uU(14," *"),t.qZA()(),t._UZ(15,"input",10)(16,"app-error-message",11),t.qZA(),t.TgZ(17,"div",8)(18,"label",9),t._uU(19,"CD "),t.TgZ(20,"small"),t._uU(21," *"),t.qZA()(),t.TgZ(22,"nb-select",12),t.YNc(23,ut,2,4,"nb-option",13),t.qZA()(),t.TgZ(24,"div",8)(25,"label",9),t._uU(26,"Tipo de cami\xf3n "),t.TgZ(27,"small"),t._uU(28," *"),t.qZA()(),t.TgZ(29,"nb-select",14),t.YNc(30,dt,2,2,"nb-option",13),t.qZA(),t._UZ(31,"app-error-message",15),t.qZA(),t.TgZ(32,"div",16)(33,"label",9),t._uU(34,"Procediencia"),t.qZA(),t._UZ(35,"input",17),t.qZA(),t.TgZ(36,"div",16)(37,"label",9),t._uU(38,"RUC "),t.qZA(),t._UZ(39,"input",18),t.qZA(),t.TgZ(40,"div",19)(41,"label",9),t._uU(42,"Empresa"),t.qZA(),t._UZ(43,"input",20),t.qZA()()(),t.TgZ(44,"nb-card-footer",21)(45,"button",22),t.NdJ("click",function(){return o.submit()}),t._UZ(46,"nb-icon",23),t._uU(47," Guardar "),t.qZA(),t.TgZ(48,"button",24),t._uU(49," Cancelar "),t.qZA()()()),2&e&&(t.xp6(4),t.Q6J("title",o.title),t.xp6(5),t.Q6J("formGroup",o.form),t.xp6(14),t.Q6J("ngForOf",o.campus),t.xp6(7),t.Q6J("ngForOf",o.ttypes),t.xp6(15),t.Q6J("disabled",o.form.invalid))},dependencies:[d.sg,f.rH,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,r.Asz,r.yKW,r.XWE,r.ndF,r.DPz,r.fMN,r.h8i,r.rs,r.q51,_.w,C.H]}),i})()},{path:"tipos-camiones",component:lt},{path:"",redirectTo:"registros",pathMatch:"full"}];let gt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[f.Bz.forChild(mt),f.Bz]}),i})();var ht=u(8542),_t=u(798),ft=u(328),bt=u(1765);let Zt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.ez,gt,ht.Y,_t.j,ft.y,v.JX,c.u5,bt.s]}),i})()}}]);